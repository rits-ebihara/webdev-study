
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="EBIHARA Kenji (kenji.ebihara@jrits.ricoh.co.jp)">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>言語 - ES20xx / TypeScript - Webアプリ開発の基本</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@8.0.0/dist/mermaid.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">
    
      <link rel="stylesheet" href="../custom.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#-es20xx-typescript" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Webアプリ開発の基本" class="md-header__button md-logo" aria-label="Webアプリ開発の基本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Webアプリ開発の基本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              言語 - ES20xx / TypeScript
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Webアプリ開発の基本" class="md-nav__button md-logo" aria-label="Webアプリ開発の基本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Webアプリ開発の基本
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Top Page
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../01.architecture/" class="md-nav__link">
        Webアプリケーションのアーキテクチャ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../02.package-manager/" class="md-nav__link">
        パッケージ・マネージャ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../03.libraries/" class="md-nav__link">
        JavaScript でよく使用されるライブラリ
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          言語 - ES20xx / TypeScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        言語 - ES20xx / TypeScript
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    概要
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecmascript" class="md-nav__link">
    ECMAScript
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#typescript" class="md-nav__link">
    TypeScript
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    演習
  </a>
  
    <nav class="md-nav" aria-label="演習">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecmascript_1" class="md-nav__link">
    ECMAScript
  </a>
  
    <nav class="md-nav" aria-label="ECMAScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    変数と定数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arrow" class="md-nav__link">
    arrow関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    テンプレートリテラル
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    デフォルト引数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    可変⻑引数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    オブジェクトの分割代⼊
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    スプレッド構文（オブジェクトの展開）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    クラス定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    オプショナル・チェイニング演算子
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#promise-async-await" class="md-nav__link">
    Promise / async / await
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    配列のメソッドの拡張
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-of" class="md-nav__link">
    for ~ of
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    配列の順次処理での非同期処理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    末尾のカンマ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ショートハンド
  </a>
  
    <nav class="md-nav" aria-label="ショートハンド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3項演算子
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    短絡演算子(||, &amp;&amp;)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    オブジェクト・リテラルでプロパティ名と変数名が同じ場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    関数の戻り値
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    カリー化と部分適用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typescript_1" class="md-nav__link">
    TypeScript
  </a>
  
    <nav class="md-nav" aria-label="TypeScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    変数の型指定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    Union型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null-undefined-null" class="md-nav__link">
    null と undefined は明確に区別され、null も型として扱う
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    文字列リテラル型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    オブジェクト型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    関数型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    型推論
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    文字列インデクサ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    クラス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    ジェネリック型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    タプル型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utility-types" class="md-nav__link">
    Utility Types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    まとめ
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../05.webpack/" class="md-nav__link">
        モジュールバンドラ: Webpack
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Webフレームワーク
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Webフレームワーク" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Webフレームワーク
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06.web-framework/" class="md-nav__link">
        はじめに
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06.web-framework/react/" class="md-nav__link">
        React
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06.web-framework/vuejs/" class="md-nav__link">
        Vue.js
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../07.linter-formatter/" class="md-nav__link">
        Linter と Formatter
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          非同期関数
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="非同期関数" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          非同期関数
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08.async-functions/" class="md-nav__link">
        概要
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08.async-functions/react/" class="md-nav__link">
        React を使った例
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../09.test/" class="md-nav__link">
        Webアプリケーションのテスト
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    概要
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecmascript" class="md-nav__link">
    ECMAScript
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#typescript" class="md-nav__link">
    TypeScript
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    演習
  </a>
  
    <nav class="md-nav" aria-label="演習">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecmascript_1" class="md-nav__link">
    ECMAScript
  </a>
  
    <nav class="md-nav" aria-label="ECMAScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    変数と定数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arrow" class="md-nav__link">
    arrow関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    テンプレートリテラル
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    デフォルト引数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    可変⻑引数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    オブジェクトの分割代⼊
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    スプレッド構文（オブジェクトの展開）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    クラス定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    オプショナル・チェイニング演算子
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#promise-async-await" class="md-nav__link">
    Promise / async / await
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    配列のメソッドの拡張
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-of" class="md-nav__link">
    for ~ of
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    配列の順次処理での非同期処理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    末尾のカンマ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ショートハンド
  </a>
  
    <nav class="md-nav" aria-label="ショートハンド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3項演算子
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    短絡演算子(||, &amp;&amp;)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    オブジェクト・リテラルでプロパティ名と変数名が同じ場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    関数の戻り値
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    カリー化と部分適用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typescript_1" class="md-nav__link">
    TypeScript
  </a>
  
    <nav class="md-nav" aria-label="TypeScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    変数の型指定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    Union型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null-undefined-null" class="md-nav__link">
    null と undefined は明確に区別され、null も型として扱う
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    文字列リテラル型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    オブジェクト型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    関数型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    型推論
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    文字列インデクサ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    クラス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    ジェネリック型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    タプル型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utility-types" class="md-nav__link">
    Utility Types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    まとめ
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="-es20xx-typescript">言語 - ES20xx / TypeScript</h1>
<p>筆者: 海老原 賢次（kenji.ebihara@jrits.ricoh.co.jp）<br />
作成日: 2021-08-18<br />
更新履歴:</p>
<ul>
<li>2021-08-18: 新規作成</li>
<li>2021-08-25: 配列に関する記述を追記した。(for await ~ of など)</li>
<li>2021-10-25: 記述漏れを追加、サンプルコードの間違い(array.filter)を修正した</li>
</ul>
<h2 id="_1">概要</h2>
<p>ここでは、JavaScript の言語規格である ECMAScript と TypeScript について書いています。</p>
<p>また、JavaScript は、ECMAScript のバージョンアップに合わせてその機能も追加されているので、最新の仕様についても述べます。</p>
<h2 id="ecmascript">ECMAScript</h2>
<p>JavaScript は、Webブラウザの黎明期に Netscape というブラウザに搭載されたのが始まります。</p>
<p>そのあとIEや他のブラウザでも採用され、Flash のスクリプトや Windowsのシェルとしても採用されました。</p>
<p>しかし、それぞれ独自の仕様が追加されたり、同じ名前のメソッドでも動作が異なるなど、かなり混乱した時代がありました。</p>
<p>そのため、ECMAScript としして標準の規格を作ることとなりました。ECMAScript は、規格の定義であり、いわば仕様書のようなものです。言語では有りません。</p>
<p>現在のブラウザでは、この ECMAScript の仕様に従って作成されており、ブラウザ間の差異はかなり少なくなりました。しかし、ECMAScript は毎年更新され、各ブラウザはそれに追いつこうとしていますが、ややばらつきがあります。特に新しいの仕様については注意が必要です。</p>
<p>ブラウザの対応状況は、下記のページで確認できます。</p>
<p><a href="http://kangax.github.io/compat-table/es2016plus/">ECMAScript 2016+ compatibility table</a></p>
<p>ECMAScript のバージョンは、2015年以前は ES6 などの番号が、2015年移行は ES2020 など発行年が付きます。</p>
<p>Node.js は、ECMAScript に比較的早い段階で対応されるので、最新の仕様を試したい場合には良いと思います。</p>
<p><a href="https://nodejs.org/ja/docs/es6/">ECMAScript 2015 (ES6) とそれ以降のバージョン | Node.js</a></p>
<h2 id="typescript">TypeScript</h2>
<p>TypeScript は、マイクロソフトが開発している Alt JavaScript 言語 です。</p>
<p>JavaScript は、軽量なオブジェクト指向言語です。軽量なので、すぐに作って試す、ということができますが、規模が大きくなるとそれが欠点となり、安全性（バグの生みやすさ）やメンテナンス性が非常に低下します。</p>
<p>TypeScript は、Alterative JavaScript 言語と呼ばれるもので、大規模アプリでも適用できるようにしたものです。</p>
<p>JavaScript を扱う Webアプリは非常に人気があり、情報も豊富です。Google でも6番目の社内標準言語として位置づけられています。</p>
<p><a href="https://www.publickey1.jp/blog/17/googletypescriptng-conf_2017.html">Google社内の標準言語としてTypeScriptが承認される。ng-conf 2017 － Publickey</a></p>
<blockquote>
<p>Google の社内標準言語の他は、C/C++、Java、JavaScript、Python、Go</p>
</blockquote>
<p>TypeScript の仕様で書いたコードを、JavaScript にコンパイル（変換）して使用します。</p>
<p>ざっくりと、下記のような特徴があります。</p>
<ol>
<li>
<p>TypeScriptではJavaScriptと同様の構文が使える</p>
<p>TypeScript は、ECMAScript の仕様に型定義などの独自仕様を追加したものになっています。ですので、JavaScript で書いたコードは、そのまま TypeScript にもなります。<br />
このことで、開発者の学習コストは大きく有りません。</p>
</li>
<li>
<p>JavaScriptは動的型付け、TypeScriptは静的型付け</p>
<p>TypeScript は、厳密に型チェックされます。例えば、文字列を入れた変数に、数値を入れることはできません。（コンパイルエラーになります）<br />
また、Null Safety にも書けるので、よくある null / undefined のエラーも低減できます。</p>
<p>型のチェックを無視してコンパイルしたり、any 型を使うことで型チェックを回避できたりするので、部分的に型チェックを入れる、ということもできます。</p>
</li>
<li>
<p>コンパイラを通すので、事前に構文チェックが行える</p>
<p>上に書いたような間違いは、JavaScriptでは実行時でないとわかりませんし、それだけではエラーにもならないので、原因の追跡が難しい場合が多いです。<br />
TypeScript は、コンパイル時にそういったものをエラーとして検知するので、事前に判明できるので、安全なコーディングができます。</p>
</li>
<li>
<p>TypeScriptではインターフェースなど型定義の作成ができる</p>
<p>型定義として、JavaScript のビルドインのタイプだけでなく、Java や C# のようなインターフェースの定義ができます。<br />
変数で、インターフェースが割り当てられると必須のプロパティが無かったり、プロパティの値の型が異なったりすると、エラーになります。</p>
</li>
</ol>
<p>ES20xx を　ES5（古いブラウザ対応）に変換（トランスパイル）したり、モジュールをバンドルする機能はないので、Webブラウザアプリの場合は webpack などで解決する必要があります。</p>
<p>厳密な型定義がされることで、バグを未然に防ぐことができるとともに、エディタの入力支援を受けやすくもなります。これの有無によって開発効率が大きく変わります。</p>
<h2 id="_2">演習</h2>
<h3 id="ecmascript_1">ECMAScript</h3>
<p>ECMAScript で大きく変わった、ES2015以降の仕様について、確認していきましょう。</p>
<h4 id="_3">変数と定数</h4>
<p>JavaScriptでは変数の宣言は、<code>var</code> でしたが、<code>let</code>, <code>const</code> が追加されました。</p>
<p>これにより、<code>var</code> の仕様は非推奨になっています。</p>
<p><code>let</code> は、値を入れ替えることができる変数、<code>const</code> は入れ替えられない変数です。</p>
<p>意外かもしれませんが、殆どの場合 <code>const</code> で賄えます。基本的には<code>const</code>を使い、必要な場合に <code>let</code> を使う、のが推奨されています。ESLint でもそういったルールがデフォルトになっています。</p>
<p>勘違いしやすいのは、<code>const</code>で定義したオブジェクトのプロパティの値は変えられる、ということです。これは、オブジェクト自体は同じもの、だからです。ちなみに、内容が全く一緒だけど別に定義したオブジェクトは同一ではないので、代入できません。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">l</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span>
<span class="nx">l</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span> <span class="c1">// 👍 OK</span>

<span class="kd">const</span> <span class="nx">c</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span>
<span class="nx">c</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span> <span class="c1">// ❌ エラー</span>

<span class="kd">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;ebihara&quot;</span> <span class="p">};</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;kenji&quot;</span><span class="p">;</span> <span class="c1">// 👍 OK</span>
<span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;kenji&quot;</span> <span class="p">};</span> <span class="c1">// ❌ NG</span>
</code></pre></div>
</td></tr></table>
<h4 id="arrow">arrow関数</h4>
<p>関数は、function を使って定義しますが、下記のような書き方ができるようになりました。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">hoge</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<p>JavaScript では、Function はオブジェクトの扱いなので、変数のように関数の引数に指定できたりします。Arrow関数のほうがそのことが直感的にわかりやすいと思います。</p>
<p>この2つは <strong>ほぼ</strong> 同じですが、'this' の取り扱いが異なるので、注意です。</p>
<p>通常の function だと、呼び出し⽅によって 'this' の内容が異なります。</p>
<p>arrow 関数であれば、this は書いたところの 'this' に拘束されます。</p>
<p>arrow 関数のほうが、わかりやすいので function はできるだけ 使わない ほうが良いです。また、この書き方が様々なサンプルでも示されていますし、Reactでも普通に使われます。慣れておいたほうがいいでしょう。</p>
<p>しかし、オブジェクトのメソッド（後述するクラスも同様）に関しては、this の取り扱いは function でないと正しく有りません。</p>
<p>なので、function 形式が全くなくなる、というわけではないです。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// 👍 正しい</span>
<span class="kd">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;hoga&#39;</span><span class="p">,</span>
  <span class="nx">setName</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">s</span> <span class="p">},</span>
<span class="p">}</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">&#39;fuga&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// -&gt; &#39;fuga&#39;;</span>

<span class="c1">// ❌ NG</span>
<span class="kd">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;hoga&#39;</span><span class="p">,</span>
  <span class="nx">setName</span><span class="o">:</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">s</span> <span class="p">},</span>
<span class="p">}</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">&#39;fuga&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// -&gt; &#39;hoge&#39;;</span>
<span class="c1">// このときの this は、グローバルの this = window になります。</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// -&gt; &#39;fuga&#39;;</span>
</code></pre></div>
</td></tr></table>
<h4 id="_4">テンプレートリテラル</h4>
<p>⽂字列リテラルとして、 '"ダブルクォーテーション"' と ''シングルクォーテーション'' が使われます。</p>
<p>これに加え、 '<code>バッククォート</code>' も⽂字列リテラルとして利⽤できるようになりましたが、これは、改行を含んだり、内部で変数を埋め込んで展開できるようになりました。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;ebihara kenji&#39;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">date</span> <span class="o">=</span> <span class="ow">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`こんにちは! </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> さん!`</span><span class="p">);</span> <span class="c1">// -&gt; こんにちは! ebihara kenji さん!</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`今は </span><span class="si">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span><span class="si">}</span><span class="sb"> です。 `</span><span class="p">);</span> <span class="c1">// -&gt; 今は Tue Jun 12 2018 12:58:17 GMT+0900 です。</span>
<span class="c1">// 改行もいける</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`今は</span>
<span class="si">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span><span class="si">}</span><span class="sb"></span>
<span class="sb">です。 `</span><span class="p">);</span>
<span class="c1">// ↓</span>
<span class="c1">// 今は</span>
<span class="c1">// Wed Jun 13 2018 14:34:43 GMT+0900 (東京 (標準時))</span>
<span class="c1">// です。</span>
<span class="c1">// エスケープしないで出力する</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">.</span><span class="nx">raw</span><span class="sb">`改行は\nでできます`</span><span class="p">);</span>
<span class="c1">// 改行は\nで返されます。</span>
</code></pre></div>
</td></tr></table>
<p>最後の記述は、 タグ付きテンプレート と⾔われるものです。String.raw は関数です。</p>
<p>ここでは詳細は説明しませんが、ライブラリではこの呼び方をすることも有るので、こういう書き方も有る、と覚えておいてください。</p>
<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Template_literals#tagged_templates">テンプレートリテラル (テンプレート文字列) - JavaScript | MDN</a></p>
<h4 id="_5">デフォルト引数</h4>
<p>関数の引数の宣⾔で、引数が指定されないときのデフォルト値を指定できるようになりました。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">keisho</span><span class="o">=</span><span class="s1">&#39;さん&#39;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ようこそ </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">keisho</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">hello</span><span class="p">(</span><span class="s1">&#39;kenji&#39;</span><span class="p">);</span> <span class="c1">// -&gt; ようこそ kenji さん</span>
</code></pre></div>
</td></tr></table>
<h4 id="_6">可変⻑引数</h4>
<p>関数の引数で、可変の数の引数を宣⾔できるようになりました。ただし、他の引数の最後に指定する必要があります。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="p">...</span><span class="nx">keisho</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">keisho</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">a</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ようこそ </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">a</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="nx">hello</span><span class="p">(</span><span class="s1">&#39;kenji&#39;</span><span class="p">,</span> <span class="s1">&#39;さん&#39;</span><span class="p">,</span> <span class="s1">&#39;さま&#39;</span><span class="p">,</span> <span class="s1">&#39;くん&#39;</span><span class="p">);</span>
<span class="c1">// ようこそ kenji さん</span>
<span class="c1">// ようこそ kenji さま</span>
<span class="c1">// ようこそ kenji くん</span>
</code></pre></div>
</td></tr></table>
<h4 id="_7">オブジェクトの分割代⼊</h4>
<p>オブジェクト内のプロパティをそのプロパティと同じ名前のローカル変数で参照する場合、簡単に書くことができます。また、プロパティが undefined の場合の初期値も定義できます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;kenji ebihara&#39;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mf">29</span><span class="p">,</span>
  <span class="nx">address</span><span class="o">:</span> <span class="s1">&#39;yoshino-cho kagosima-ken&#39;</span><span class="p">,</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="o">=-</span><span class="mf">1</span><span class="p">,</span> <span class="nx">gender</span><span class="o">=</span><span class="s2">&quot;unknown&quot;</span><span class="p">}</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// -&gt; kenji ebihara</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span> <span class="c1">// -&gt; 29</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gender</span><span class="p">);</span> <span class="c1">// -&gt; unknown </span>
</code></pre></div>
</td></tr></table>
<p>配列でも同様に受け取ることができます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="p">[</span><span class="nx">first</span><span class="p">,</span> <span class="nx">second</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">first</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">second</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="c1">// &quot;a, b&quot;</span>
</code></pre></div>
</td></tr></table>
<h4 id="_8">スプレッド構文（オブジェクトの展開）</h4>
<p>オブジェクト内のプロパティを、"..."で同じ名前の変数にすべて展開できます。</p>
<p>展開した内容は1階層コピー（いわゆるシャローコピー）で、オブジェクトが含まれる場合、そのオブジェクトはコピー元と同じものが参照さるので、注意が必要です。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;kenji ebihara&#39;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mf">29</span><span class="p">,</span>
  <span class="nx">address</span><span class="o">:</span> <span class="s1">&#39;yoshino-cho kagosima-ken&#39;</span><span class="p">,</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">assignUser</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">user</span><span class="p">,</span>
  <span class="nx">assignData</span><span class="o">:</span> <span class="ow">new</span> <span class="nb">Date</span><span class="p">(),</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">assignUser</span><span class="p">);</span>
<span class="cm">/*</span>
<span class="cm">{</span>
<span class="cm">  &quot;name&quot;: &quot;kenji ebihara&quot;,</span>
<span class="cm">  &quot;age&quot;: 29,</span>
<span class="cm">  &quot;address&quot;: &quot;yoshino-cho kagosima-ken&quot;,</span>
<span class="cm">  &quot;assignData&quot;: &quot;2018-06-12T04:39:46.354Z&quot;</span>
<span class="cm">}</span>
<span class="cm">*/</span>
</code></pre></div>
</td></tr></table>
<p>配列でも同様のことができます。配列のマージや同じ値を持つ別の配列を作成するときなどに便利です。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">abc</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">a123</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="p">...</span><span class="nx">abc</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a123</span><span class="p">);</span> <span class="c1">// -&gt; [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]</span>
</code></pre></div>
</td></tr></table>
<h4 id="_9">クラス定義</h4>
<p>function でコンストラクタ関数として書くことにより、クラスっぽい事はできました。</p>
<p>しかし、特別な宣⾔もなく通常の関数との違いがわからないことから、誤って通常関数のように使ってしま
うと、エラーになるならまだしも、場合によってはエラーにもならず変な動作をしてしまうこともあり得
ます。</p>
<p>class ステートメントが追加されたことで、これを利⽤するようにしましょう。</p>
<p>ただしJavaやC#異なり、プロパティはコンストラクタの中で定義します。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nx">Polygon</span> <span class="p">{</span>
<span class="c1">// height = 0 // こんな事はできない</span>
<span class="c1">// コンストラクタ</span>
  <span class="kr">constructor</span><span class="p">(</span><span class="nx">height</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// getter</span>
  <span class="nx">get</span> <span class="nx">area</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">calcArea</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="c1">// private メンバには &#39;#&#39; を付ける</span>
  <span class="err">#</span><span class="nx">calcArea</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">square</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Polygon</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span> <span class="mf">10</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">square</span><span class="p">.</span><span class="nx">area</span><span class="p">);</span>
<span class="c1">// 100</span>
</code></pre></div>
</td></tr></table>
<h4 id="_10">オプショナル・チェイニング演算子</h4>
<p>オブジェクトのプロパティを参照したい場合、オブジェクト自身が null / undefined の判断をすることは多いかと思います。</p>
<p>そのプロパティがオブジェクトで、null / undefined の可能性がある場合、さらにその判断をすることになりますが、if が冗長的になります。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">session</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>オプショナル・チェイニング演算子を使用すると、完結に書くことができます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">obj</span><span class="o">?</span><span class="p">.</span><span class="nx">user</span><span class="o">?</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span> <span class="c1">// obj か、obj.user が null/undefined の場合、undefined を返します。</span>
</code></pre></div>
</td></tr></table>
<h4 id="promise-async-await">Promise / async / await</h4>
<p>Promise は非同期処理関数で使用されるオブジェクトです。</p>
<p>Promise 以前は、非同期処理が完了したときの関数（コールバック関数）を引数で渡していました。</p>
<p>ある非同期関数の後に別の非同期関数を実行する、ということも少なくなく、このような場合コールバック関数が入れ子になってしまい、コードの見通しが非常に悪くなります。俗にコールバック関数地獄、と言われています。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nx">asyncFn1</span><span class="p">((</span><span class="nx">data1</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">asyncFn2</span><span class="p">((</span><span class="nx">data2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">asyncFn3</span><span class="p">((</span><span class="nx">data3</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nx">asyncFn4</span><span class="p">((</span><span class="nx">data4</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                <span class="c1">//処理</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span> 
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
<p>非同期関数が、Promise オブジェクトを返すように改善すると、下記のようにメソッド・チェーンの形で書くことができます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nx">asyncFn1</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data1</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">asyncFn2</span><span class="p">();</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">asyncFn3</span><span class="p">();</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data3</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">asyncFn4</span><span class="p">();</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data4</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="cm">/* 処理 */</span>  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="cm">/* 上のいずれかで例外が発生した場合に、catch が処理される */</span>
  <span class="p">});</span>
</code></pre></div>
</td></tr></table>
<p>Promise を返す非同期関数を作成するには、new Promise としてPromiseオブジェクトを作成します。引数に処理の関数を定義します。成功時には resolve（関数の第1引数）、失敗時に reject（関数の第2に引数） を実行します。 </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">asyncFn1</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="ow">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="c1">// 何かしらの処理</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// result は何かしらの処理の結果が入っていることと仮定する</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// 引数に与えたオブジェクトを非同期関数の戻り値となる</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">reject</span><span class="p">(</span><span class="ow">new</span> <span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;エラーが発生しました&#39;</span><span class="p">));</span> <span class="c1">// reject が呼ばれると、呼び元の catch が処理される。</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<p>async / await は、メソッドチェーンの形ではない、非同期処理関数を実行する書き方です。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// await を使用するには、その関数が async 宣言されている必要がある。</span>
<span class="c1">// async 宣言した関数は、自動的に Promise を返す非同期関数となる。</span>
<span class="kd">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span> <span class="c1">// 非同期処理の例外(reject)は、try ~ catch で処理できる</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">asyncFn1</span><span class="p">();</span> <span class="c1">// resolve で渡された値が result に入る</span>
    <span class="c1">// await があると asyncFn1 が終了するまで、次の処理に進まない。</span>
    <span class="c1">// asyncFn1 完了後の処理</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span> <span class="c1">// return した値が、非同期関数の戻り値となる。Promise での resolve と同じ</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<h4 id="_11">配列のメソッドの拡張</h4>
<p>配列（Array) を順次に処理する場合、for を使うことが多いでしょう。ES2015 以降では、配列のメソッドが拡張され、関数で順次処理を書くことができるようになっています。</p>
<p>ここではその一部を紹介します。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="nx">age</span><span class="o">:</span> <span class="mf">10</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;taro&#39;</span><span class="p">},</span>
  <span class="p">{</span> <span class="nx">age</span><span class="o">:</span> <span class="mf">20</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;jiro&#39;</span><span class="p">},</span>
  <span class="p">{</span> <span class="nx">age</span><span class="o">:</span> <span class="mf">30</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;hanako&#39;</span><span class="p">},</span>
<span class="p">];</span>

<span class="c1">// age が20以上のオブジェクトを抜き出す</span>

<span class="kd">const</span> <span class="nx">over20</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;=</span> <span class="mf">20</span><span class="p">);</span> <span class="c1">// (user) =&gt; { return user &gt;= 20 } と同じ意味です</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">over20</span><span class="p">);</span> <span class="c1">// [  { age: 20, name: &#39;jiro&#39;},  { age: 30, name: &#39;hanako&#39;} ]</span>

<span class="c1">// 条件にあったものを１つ抽出する</span>

<span class="kd">const</span> <span class="nx">taroUser</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;taro&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">taroUser</span><span class="p">);</span> <span class="c1">// { age: 10, name: &#39;taro&#39;}</span>

<span class="c1">// 配列内に条件に合うものが含まれるかどうか</span>

<span class="kd">const</span> <span class="nx">exist</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">includes</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;saburo&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">exist</span><span class="p">);</span> <span class="c1">// false</span>

<span class="c1">// 配列から、別の配列を生成する。</span>

<span class="kd">const</span> <span class="nx">displayList</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`名前:</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> / 年齢:</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">age</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">displayList</span><span class="p">);</span> <span class="c1">// [&quot;名前:taro / 年齢:10&quot;, &quot;名前:jiro / 年齢:20&quot;, &quot;名前:hanako / 年齢:30&quot;]</span>

<span class="c1">// 配列の値を蓄積して、単一の戻り値を返す</span>

<span class="kd">const</span> <span class="nx">nameChain</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">accumulator</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">accumulator</span><span class="si">}</span><span class="sb"> / [</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">]`</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="cm">/*初期値*/</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">nameChain</span><span class="p">);</span> <span class="c1">// &quot;/ [taro] / [jiro] / [hanako]&quot;</span>

<span class="c1">// インデックスを使って配列の一部を抜き出す（元の配列に変化はない）</span>

<span class="kd">const</span> <span class="nx">a2</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">);</span> <span class="c1">// インデックス 1 から インデックス 2 までを取り出す</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a2</span><span class="p">);</span> <span class="c1">// [{ age: 20, name: &quot;jiro&quot; }, { age: 30, name: &quot;hanako&quot; }]</span>
<span class="kd">const</span> <span class="nx">last</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mf">1</span><span class="p">);</span> <span class="c1">// 最後の1つ目 から 1つ取り出す = 配列の最後の項目だけ取り出す</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">last</span><span class="p">);</span> <span class="c1">// [{ age: 30, name: &quot;hanako&quot; }]</span>

<span class="c1">// 配列を順次処理する</span>

<span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// user を使った処理</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="p">})</span>

<span class="c1">// 以下は破壊的メソッド</span>
<span class="c1">// 配列の指定したインデックスに要素を追加する</span>
<span class="nx">users</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="p">{</span> <span class="nx">age</span><span class="o">:</span> <span class="mf">40</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;saburo&#39;</span><span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span> <span class="c1">// [{&quot;age&quot;:10,&quot;name&quot;:&quot;taro&quot;},{&quot;age&quot;:40,&quot;name&quot;:&quot;saburo&quot;},{&quot;age&quot;:20,&quot;name&quot;:&quot;jiro&quot;},{&quot;age&quot;:30,&quot;name&quot;:&quot;hanako&quot;}]</span>
<span class="c1">// 配列から指定したインデックスを削除する</span>
<span class="nx">users</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="mf">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span> <span class="c1">// [{&quot;age&quot;:10,&quot;name&quot;:&quot;taro&quot;},{&quot;age&quot;:40,&quot;name&quot;:&quot;saburo&quot;}, {&quot;age&quot;:30,&quot;name&quot;:&quot;hanako&quot;}]</span>
</code></pre></div>
</td></tr></table>
<h4 id="for-of">for ~ of</h4>
<p>配列を巡回させるときに、for ~ in を使用していませんか？これは、思わぬ動作の不具合を招きます。</p>
<p>for ~ in は、配列をループさせるのではなく、<strong>オブジェクトが持っているプロパティ</strong> を巡回させるものです。</p>
<p>配列におけるインデックスも、プロパティ扱いなので配列で使えなくはないですが、間違ってオブジェクトを渡してしまってもエラーにならず、意図しない動きになります。</p>
<p>また、JavaScript は型に対してゆるい仕様です。配列のオブジェクトに任意の名前のプロパティも付けることが可能ですが、それも巡回の</p>
<p>確実に配列を巡回させるには、for ~ of を使うべきです。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="nx">array</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">v</span> <span class="ow">in</span> <span class="nx">array</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">}</span> <span class="c1">// 0, 1, 2, name</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">v</span> <span class="k">of</span> <span class="nx">array</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">}</span> <span class="c1">// a, b, c</span>
</code></pre></div>
</td></tr></table>
<p>ただし、webpack でコンパイルする場合、for ~ of は新しい記法なのでこれと同じ動きをするようなコードに変換されますが、サイズがかなり大きくなるようです。</p>
<p>よって、forEach を使うことをが推奨されます。</p>
<h4 id="_12">配列の順次処理での非同期処理</h4>
<p>配列を順次処理する中で、非同期の処理を呼ぶ場合注意が必要です。</p>
<p>for ~ of や、forEach など Array のメソッドの場合、下記のようにしても1つ1つの非同期処理の完了を待たずに次の配列に移ります。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">asyncFn</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span> <span class="c1">// この完了を待たずに配列の次の値の処理に進む</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
<p>上と同じ。こちらであれば、非同期処理の完了を待たずに次の配列の処理に進むことが判りやすいですね。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Promise オブジェクトを返して関数はすぐに終わる。</span>
  <span class="c1">// Promise の中の関数は、非同期で実行される</span>
  <span class="ow">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">asyncFn</span><span class="p">(</span><span class="nx">item</span><span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">resolve</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
<p>これは、関数の中では待つのですが、その外側には Promise オブジェクトを返して処理が続行してしまうからです。</p>
<p><img alt="ループ内での非同期処理" src="async-roop.drawio.png" /></p>
<p>配列の順次処理の中に非同期処理を実行する場合は、次のいずれかの戦略を考えます。</p>
<ul>
<li>
<p>1つづつ非同期処理の終了待って進む、シーケンシャルに処理する方法。</p>
</li>
<li>
<p>配列の数だけパラレル（並列）に処理して、すべての完了を待つ方法。</p>
</li>
<li>
<p>パラレルに処理する上限を設けて、その上限ごとに処理する方法。</p>
</li>
</ul>
<p>これらは配列の数が問題になります。非同期処理が時間のかかる処理の場合は、シリアルに処理するとパフォーマンスに影響有るでしょう。</p>
<p>配列の数が多い場合は、パラレルに処理するとマシンのメモリなどスペックの問題があるかもしれません。</p>
<p>場合によって方法を選択する必要があります。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">item</span> <span class="k">of</span> <span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">asyncFn</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span> <span class="c1">// この完了を待って配列の次の値の処理に進む</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
<blockquote>
<p>シーケンシャルに処理する場合、for ~ of を使うことの他に、for await ~ of が使用できます。</p>
</blockquote>
<p>パラレルに処理する場合は、Promise.all が使えます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// すべてのPromiseが完了するまで待機する</span>
  <span class="k">return</span> <span class="nx">asyncFn</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>  <span class="c1">// map で、Promise オブジェクトの配列を返す</span>
<span class="p">}));</span>
</code></pre></div>
</td></tr></table>
<h4 id="_13">末尾のカンマ</h4>
<p>オブジェクトリテラルや配列リテラル、関数の引数で、最後の項⽬の後にカンマが付けられます。</p>
<p>後に要素を⾜したり、順番を⼊れ替えたりするときに、カンマを付けたり取ったりする⼿間が省かれるでなるべくつけておくのが良いと思います。</p>
<p>eslint などでは必須のルールとすることができます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span><span class="p">,</span>
<span class="nx">age</span><span class="o">:</span> <span class="mf">29</span><span class="p">,</span> <span class="c1">// OK</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="p">];</span> <span class="c1">// これもOK</span>
<span class="kd">let</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span> <span class="c1">// 仕様上はOKだが、対応ブラウザが限られる</span>
</code></pre></div>
</td></tr></table>
<h4 id="_14">ショートハンド</h4>
<p>JavaScriptでは、省略形などによって、より短いコードで書くことができます。これらのテクニックも知っておくと効率良いコーディングができるでしょう。</p>
<h5 id="3">3項演算子</h5>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="s1">&#39;processing&#39;</span><span class="p">;</span>
<span class="c1">// if を使う場合</span>
<span class="kd">let</span> <span class="nx">stateString1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">state</span> <span class="o">===</span> <span class="s1">&#39;complete&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">stateString1</span> <span class="o">=</span> <span class="s1">&#39;完了&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">stateString1</span> <span class="o">=</span> <span class="s1">&#39;未完了&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// 3項演算子を使う場合</span>
<span class="kd">const</span> <span class="nx">stateString2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span> <span class="o">===</span> <span class="s1">&#39;complete&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;完了&#39;</span> <span class="o">:</span> <span class="s1">&#39;未完了&#39;</span><span class="p">;</span>
</code></pre></div>
</td></tr></table>
<h5 id="_15">短絡演算子(||, &amp;&amp;)</h5>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="c1">// || の例</span>
<span class="c1">// if を使う場合</span>
<span class="kd">let</span> <span class="nx">nameString1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">nameString1</span> <span class="o">=</span> <span class="s1">&#39;(空)&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// || を使う場合</span>
<span class="kd">const</span> <span class="nx">nameString2</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="s1">&#39;(空)&#39;</span><span class="p">;</span>

<span class="c1">// &amp;&amp; の例</span>
<span class="kd">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="c1">// if を使う場合</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">age</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;成功&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;失敗&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// &amp;&amp; を使う場合</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;成功&#39;</span> <span class="o">||</span> <span class="s1">&#39;失敗&#39;</span><span class="p">);</span>
</code></pre></div>
</td></tr></table>
<h5 id="_16">オブジェクト・リテラルでプロパティ名と変数名が同じ場合</h5>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;ebihara&#39;</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="mf">47</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="p">,</span> <span class="c1">// name: name と同じ</span>
  <span class="nx">age</span><span class="p">,</span> <span class="c1">// age: age と同じ</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<h5 id="_17">関数の戻り値</h5>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">fn1</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span> <span class="p">});</span>
<span class="kd">const</span> <span class="nx">fn2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">();</span>
<span class="c1">// 以下と同じ</span>
<span class="kd">const</span> <span class="nx">fn1</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span> <span class="p">};</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">fn2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h5 id="_18">カリー化と部分適用</h5>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">aisatsu</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> さん、 </span><span class="si">${</span><span class="nx">aisatsu</span><span class="si">}</span><span class="sb">。`</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">fn1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">aisatsu</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">aisatsu</span><span class="p">);</span> <span class="c1">// カリー化</span>
<span class="kd">const</span> <span class="nx">fn2</span> <span class="o">=</span> <span class="nx">fn1</span><span class="p">(</span><span class="s1">&#39;こんにちは&#39;</span><span class="p">);</span> <span class="c1">// 部分適用</span>
<span class="nx">fn2</span><span class="p">(</span><span class="s1">&#39;海老原&#39;</span><span class="p">);</span> <span class="c1">// &quot;海老原さん、こんにちは。&quot;</span>
</code></pre></div>
</td></tr></table>
<p>上をわかりやすく分解してみる</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">aisatsu</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="sb">`</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> さん、 </span><span class="si">${</span><span class="nx">aisatsu</span><span class="si">}</span><span class="sb">。`</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">fn1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">aisatsu</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">aisatsu</span><span class="p">);</span> <span class="c1">// -(1) </span>
  <span class="k">return</span> <span class="nx">f</span><span class="p">;</span> <span class="c1">// 関数を返す関数</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">fn2</span> <span class="o">=</span> <span class="nx">fn1</span><span class="p">(</span><span class="s1">&#39;こんにちは&#39;</span><span class="p">);</span> <span class="c1">// fn2 には、(1) の関数が入る</span>
<span class="nx">fn2</span><span class="p">(</span><span class="s1">&#39;海老原&#39;</span><span class="p">);</span> <span class="c1">// &quot;海老原さん、こんにちは。&quot;</span>
</code></pre></div>
</td></tr></table>
<div class="admonition 参考">
<p class="admonition-title">参考</p>
<p><a href="https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%AA%E3%83%BC%E5%8C%96">カリー化 - Wikipedia</a><br />
<a href="https://kazchimo.com/2021/03/29/monkey_curry/">サルでもわかるカリー化とそのメリット - These Walls</a></p>
</div>
<h3 id="typescript_1">TypeScript</h3>
<p>TypeScript は、最新の ECMAScript の対応を積極的に行っているので、上で挙げた ECMAScript の仕様はそのまま使えます。</p>
<p>これに加えて、型定義に関する様々な仕様が追加されています。</p>
<h4 id="_19">変数の型指定</h4>
<p>let や const の変数に型を指定できます。型違反の代入は、コンパイル時にエラーになります。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">num</span>: <span class="kt">number</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">str</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;aa&quot;</span><span class="p">;</span>
<span class="nx">str</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="c1">// エラー</span>
</code></pre></div>
</td></tr></table>
<p>関数の引数や戻り値にも型を指定できます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">num</span>: <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="kt">string</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="sb">`num:</span><span class="si">${</span><span class="nx">num</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>　<span class="nx">OK</span> <span class="c1">// string でない return だとエラー</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">);</span> <span class="c1">// 引数の型が違うためエラー</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// result は文字列であることが確定しているため、安心して .length が使える</span>
</code></pre></div>
</td></tr></table>
<h4 id="union">Union型</h4>
<p>JavaScript では、変数に文字が入ったり数値が入ったり、といったように複数の型を取ることがあります。</p>
<p>そのような場合は、Union 型が利用できます。</p>
<p>プロパティは共通のものがあればそのまま利用できますが、</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">getYear</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span>: <span class="kt">Date</span> <span class="o">|</span> <span class="kt">number</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span> <span class="c1">// toString は Date, number どちらも持っているのでキャストが必要ない</span>
  <span class="c1">// console.log(date.getFullYear()); // number に getYear がないのでエラー 型チェックかキャストが必要</span>
  <span class="k">if</span> <span class="p">(</span><span class="ow">typeof</span> <span class="nx">date</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">d</span> <span class="o">=</span> <span class="ow">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>　 <span class="c1">// 型チェックにより、date は number に確定している</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span> <span class="c1">// 型チェックにより、date は、Date に確定している</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h4 id="null-undefined-null">null と undefined は明確に区別され、null も型として扱う</h4>
<p>型を指定した変数は、null, undefined も入れることができません。</p>
<p>入れる場合は、Union型として定義します。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">name</span>: <span class="kt">string</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// NG</span>
<span class="kd">let</span> <span class="nx">name2</span>: <span class="kt">string</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">=</span>  <span class="kc">null</span><span class="p">;</span> <span class="c1">// OK</span>
</code></pre></div>
</td></tr></table>
<h4 id="_20">文字列リテラル型</h4>
<p>ある変数は文字列だけど入る文字列の種類は決まっている、という場合が多いです。</p>
<p>例えば、ステータスを表す情報として、'create','processing','complete' と決まっているという場合などです。</p>
<p>これは、文字列リテラル型の Union型 として定義できます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">status</span><span class="o">:</span> <span class="s1">&#39;create&#39;</span> <span class="o">|</span> <span class="s1">&#39;processing&#39;</span> <span class="o">|</span> <span class="s1">&#39;complete&#39;</span> <span class="o">=</span> <span class="s1">&#39;create&#39;</span><span class="p">;</span>
<span class="nx">status</span> <span class="o">=</span> <span class="s1">&#39;procesing&#39;</span><span class="p">;</span> <span class="c1">// エラー タイプミスを防ぐことができる</span>
</code></pre></div>
</td></tr></table>
<p>文字列だけでなく、数値もいけます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">status</span>: <span class="kt">0</span> <span class="o">|</span> <span class="mf">1</span> <span class="o">|</span> <span class="mf">2</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="nx">status</span> <span class="o">=</span> <span class="mf">3</span><span class="p">;</span> <span class="c1">// エラー</span>
</code></pre></div>
</td></tr></table>
<h4 id="_21">オブジェクト型</h4>
<p>Java や C# のように、オブジェクトの型（interface）を定義できます。</p>
<p>interface 構文と、type 構文があります。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">type</span> <span class="nx">UserType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">user</span>: <span class="kt">User</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// 宣言しているプロパティがなかったり、宣言にないプロパティがあるとエラー</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="s2">&quot;47&quot;</span><span class="p">,</span> <span class="c1">// 型違反によりエラー</span>
  <span class="nx">address</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1">// オブエクト型にないプロパティなのでエラー</span>
<span class="p">};</span>
<span class="c1">// type で宣言した方も同様に使える</span>
<span class="kd">const</span> <span class="nx">tUser</span>: <span class="kt">UserType</span> <span class="o">=</span>  <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span><span class="p">,</span>
  <span class="nx">age</span>: <span class="kt">47</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<p>interface と type の違いですが、できることはほとんど同じです。interface は、extends で拡張できるアドバンテージがありましたが、type でも型のマージをすることで拡張と同じようなことができるようになりました。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">type</span> <span class="nx">UserType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">interface</span> <span class="nx">ExUser</span> <span class="k">extends</span> <span class="nx">User</span> <span class="p">{</span> <span class="c1">// User を拡張</span>
  <span class="nx">address?</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">type</span> <span class="nx">ExUserType</span> <span class="o">=</span> <span class="nx">UserType</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="c1">// 型をマージ</span>
  <span class="nx">address?</span>: <span class="kt">string</span><span class="p">;</span> <span class="c1">// ? をつけると、値が定義されない = undefined の場合がありうることを示す</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">user</span>: <span class="kt">ExUser</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span><span class="p">,</span>
  <span class="nx">age</span>: <span class="kt">47</span><span class="p">,</span>
  <span class="nx">address</span><span class="o">:</span> <span class="s2">&quot;kagoshima&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="c1">// type で宣言した方も同様に使える</span>
<span class="kd">const</span> <span class="nx">tUser</span>: <span class="kt">ExUserType</span> <span class="o">=</span>  <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebihara&#39;</span><span class="p">,</span>
  <span class="nx">age</span>: <span class="kt">47</span><span class="p">,</span>
  <span class="nx">address</span><span class="o">:</span> <span class="s2">&quot;kagoshima&quot;</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<p>override について、interface は 親のプロパティの型を変更できないなど厳密ですが、type の方が単純な上書きなのでルーズな拡張になります。</p>
<p>また、type では Union型 や 後述する、関数型 も定義できます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">type</span> <span class="nx">date</span> <span class="o">=</span> <span class="nb">Date</span> <span class="o">|</span> <span class="kt">string</span><span class="p">;</span>
<span class="kr">type</span> <span class="nx">FnType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span>: <span class="kt">Date</span> <span class="o">|</span> <span class="kt">number</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="kt">string</span><span class="p">;</span>
</code></pre></div>
</td></tr></table>
<p>Java のように厳密に管理したい場合は、interface が良いですが、最近では扱いが楽な type を好む人が多いようです。</p>
<p>筆者も、Java と似たような管理ができる interface を使用していましたが、最近では type を多用するようになりました。</p>
<p><a href="https://zenn.dev/luvmini511/articles/6c6f69481c2d17#3.-%E3%81%A9%E3%81%A1%E3%82%89%E3%82%92%E4%BD%BF%E3%81%86%EF%BC%9F">interfaceとtypeの違い、そして何を使うべきかについて</a></p>
<h4 id="_22">関数型</h4>
<p>関数自体も型定義できます。関数の型とは、引数の数とそれぞれの型と関数の戻り値です。</p>
<p>コールバック関数を持つ汎用的な関数を作成するときなどに便利です。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">type</span> <span class="nx">CallBackFnType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span>: <span class="kt">Date</span> <span class="o">|</span> <span class="kt">number</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="kt">string</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">fn</span>: <span class="kt">FnType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// 引数の指定をしなくても型定義により指定されているので必要ない</span>
  <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// string をreturn しないと エラーとなる。</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
<h4 id="_23">型推論</h4>
<p>型指定しなくても、変数の宣言時に代入した型から、変数の型を自動的に判別します。</p>
<p>オブジェクトリテラルについても、プロパティとそれぞれの型が自動判別されます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="nx">n</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">;</span> <span class="c1">// エラー n は数値型になっている</span>

<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ebiahra&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">47</span> <span class="p">};</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="mf">1</span><span class="p">;</span> <span class="c1">// エラー name は文字列のため</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">address</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span> <span class="c1">// エラー address プロパティはないため</span>
</code></pre></div>
</td></tr></table>
<h4 id="_24">文字列インデクサ</h4>
<p>v["key"] のようにしてメンバにアクセスできる型を宣⾔できる。JavaのMap型のようなもの。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">status</span><span class="o">:</span> <span class="p">{[</span><span class="nx">code</span>: <span class="kt">string</span><span class="p">]</span><span class="o">:</span> <span class="kt">string</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;00&#39;</span><span class="o">:</span> <span class="s1">&#39;初期&#39;</span><span class="p">,</span>
<span class="s1">&#39;10&#39;</span><span class="o">:</span> <span class="s1">&#39;申請中&#39;</span><span class="p">,</span>
<span class="s1">&#39;20&#39;</span><span class="o">:</span> <span class="s1">&#39;承認済&#39;</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">status</span><span class="p">[</span><span class="s1">&#39;30&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;廃棄&#39;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">status</span><span class="p">[</span><span class="s1">&#39;00&#39;</span><span class="p">]);</span> <span class="c1">// -&gt; &quot;初期&quot;</span>
</code></pre></div>
</td></tr></table>
<h4 id="_25">クラス</h4>
<p>ES20xx で説明したクラスが、TypeScript でも使えますが、より使いやすくなっています。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="c1">// constructor 外での初期化が可能</span>
  <span class="nx">familyName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">givenName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">gender</span><span class="o">:</span> <span class="s1">&#39;male&#39;</span> <span class="o">|</span> <span class="s1">&#39;female&#39;</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 初期化処理</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="nx">getDisplayName</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">familyName</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">givenName</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">private</span> <span class="nx">lastAccessDate</span>: <span class="kt">Date</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// 外からアクセスできない</span>
  <span class="k">public</span> <span class="nx">setLastAccessDate</span><span class="p">(</span><span class="nx">date</span>: <span class="kt">Date</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 明示的に公開</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastAccessDate</span> <span class="o">=</span> <span class="nx">date</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="k">readonly</span> <span class="nx">authority</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;admin&quot;</span><span class="p">;</span> <span class="c1">// 読み取り専用で公開</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h4 id="_26">ジェネリック型</h4>
<p>ジェネリック型は、クラスやオブジェクト、関数に外部から型を与えられる事ができる機能です。</p>
<p>Java や C# などでも同様の機能があります。</p>
<p>この機能は、汎用的なユーティリティなどを作るときに便利です。</p>
<p>例えばこのコードは、リングバッファを実現するクラスですが、バッファとして管理する値は、使う側が決めるようにするものです。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nx">RingBuffer</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">buffer</span>: <span class="kt">T</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">private</span> <span class="nx">bufferSize</span> <span class="o">=</span> <span class="mf">100</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">currentIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span><span class="p">;</span>
  <span class="k">public</span> <span class="kr">constructor</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="mf">100</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="nx">push</span><span class="p">(</span><span class="nx">value</span>: <span class="kt">T</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 配列に追加する T のオブジェクトを渡す</span>
    <span class="c1">// カレントが終端の場合は、先頭に戻る</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentIndex</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentIndex</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">bufferSize</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">currentIndex</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="nx">getCurrent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentIndex</span><span class="p">];</span> <span class="c1">// T オブジェクトが返る</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">type</span> <span class="nx">UserType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">ringBuffer</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">RingBuffer</span><span class="o">&lt;</span><span class="nx">UserType</span><span class="o">&gt;</span><span class="p">();</span>

<span class="nx">ringBuffer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">age</span><span class="o">:</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="c1">// エラー ジェネリック型に指定した型とことなる</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;taro&#39;</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
<h4 id="_27">タプル型</h4>
<p>通常配列は、その中の値は単一の型のオブジェクトであることが望ましいです。</p>
<p>ただ、例えば関数の戻り値で、複数の値を返したい場合、オブジェクトでも良いのですが、数が少ない場合、配列として1番目に文字列、2番めに数値 など決まった数と順番で返すようにすると、便利です。</p>
<p>そのように、配列の数と順番が決まっている場合、それを型として定義できます。それをタプル型といいます。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">createLog</span> <span class="o">=</span> <span class="p">(</span><span class="nx">message</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="p">[</span><span class="nb">Date</span><span class="p">,</span> <span class="kt">string</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="ow">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="sb">`S:</span><span class="si">${</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">]</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">date</span><span class="p">,</span> <span class="nx">message</span><span class="p">]</span> <span class="o">=</span> <span class="nx">createLog</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">);</span> <span class="c1">// -&gt; ISO8601 形式日付 </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span> <span class="c1">// -&gt; &quot;S:test&quot;</span>
</code></pre></div>
</td></tr></table>
<h4 id="utility-types">Utility Types</h4>
<p>これは純粋な型ではなく、定義されている型を元に、変更した別の型を生成するものです。</p>
<p><a href="https://qiita.com/k-penguin-sato/items/e2791d7a57e96f6144e5">【TypeScript】Utility Typesをまとめて理解する - Qiita</a></p>
<p>Omit や Partial がよく使われます。</p>
<p>Omit は指定したプロパティを削除します。Partial は全てのプロパティをOptional（undefined の可能性がある = なくても良い）にします。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">type</span> <span class="nx">UserType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="kr">type</span> <span class="nx">AgeOnly</span> <span class="o">=</span> <span class="nx">Omit</span><span class="o">&lt;</span><span class="nx">UserType</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// { age: number } だけの型となる</span>

<span class="kr">type</span> <span class="nx">PartialUser</span> <span class="o">=</span> <span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">UserType</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// { name?: string, age?: string } となります</span>
</code></pre></div>
</td></tr></table>
<h2 id="_28">まとめ</h2>
<p>JavaScriptでは、IEでも動作する、ES5 と呼ばれていたバージョンから、大きく仕様が追加されより短いコードで書けるようになり、コードの見通しも良くなります。</p>
<p>それぞれの仕様を正しく把握して、積極的に使っていきましょう。</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../03.libraries/" class="md-footer__link md-footer__link--prev" aria-label="Previous: JavaScript でよく使用されるライブラリ" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              JavaScript でよく使用されるライブラリ
            </div>
          </div>
        </a>
      
      
        
        <a href="../05.webpack/" class="md-footer__link md-footer__link--next" aria-label="Next: モジュールバンドラ: Webpack" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              モジュールバンドラ: Webpack
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
    
  </body>
</html>