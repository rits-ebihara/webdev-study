# Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ

## æ¦‚è¦

ã“ã“ã§ã¯ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆå…¨èˆ¬ã®è©±ã¨ã€ä¸»ã« Unit Test ã¨ã—ã¦æ›¸ã‹ã‚Œã‚‹ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ãã‚Œã«ä½¿ç”¨ã™ã‚‹ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¤ã„ã¦ã€èª¬æ˜ã—ã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆã¯å¿…é ˆ

### å“è³ªã¯ãƒ†ã‚¹ãƒˆã§ããªã„

> ã€Œãƒ†ã‚¹ãƒˆã‹ã‚‰è¦‹ãˆã¦ãã‚‹ ã‚°ãƒ¼ã‚°ãƒ«ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã€ã‚ˆã‚ŠæŠœç²‹  
> ã€Œå“è³ªã¯ãƒ†ã‚¹ãƒˆã§ã¯ãªã„ã€‚å“è³ªã¯ã€é–‹ç™ºã¨ãƒ†ã‚¹ãƒˆã‚’äº’ã„ã«åŒºåˆ¥ã§ããªããªã‚‹ã¾ã§ã«èåˆã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦å®Ÿç¾ã•ã‚Œã‚‹ã€‚ã€

### ãƒ†ã‚¹ãƒˆæ›¸ã„ã¦ãªã„ã¨ã‹ãƒ»ãƒ»ãƒ»

<pre>
ã€€ã€€ã€€ã€€ ,ã€,,,ã€,,, 
ã€€ã€€ã€€ _,,;' '" '' ;;,, 
ã€€ã€€ï¼ˆrãƒ½,;''""''ã‚›ã‚›;,ï¾‰ï½’ï¼‰ã€€ã€€ã€€ã€€ 
ã€€ã€€ ,; i ___ã€€ã€___iãƒ½ã‚›;,ã€€ã€€ãƒ†ã‚¹ãƒˆæ›¸ã„ã¦ãªã„ã¨ã‹ãŠå‰ãã‚Œ
ã€€ ,;'''|ãƒ½ãƒ»ã€‰ã€ˆãƒ»ãƒ |ï¾ ';,    @t_wadaã®å‰ã§ã‚‚åŒã˜äº‹è¨€ãˆã‚“ã®ï¼Ÿ
ã€€ ,;''"|ã€€ ã€€â–¼ã€€ã€€ |ï¾ã‚›';, 
ã€€ ,;''ã€€ãƒ½ ï¼¿äººï¼¿  /ã€€,;'_ 
 ï¼ï½¼ã€    ãƒ½  âŒ’âŒ’  /ã€€ ï¾˜ã€€ï¼¼ 
|ã€€ã€€ "ï½’,,ï½€"'''ï¾Â´ã€€ã€€,,ï¾| 
|ã€€ã€€ ã€€ ï¾˜ã€ã€€ã€€ã€€ã€€,ï¾˜ã€€ã€€ | 
|ã€€ã€€i ã€€ã‚›ï½’ã€ï¾‰,,ï½’" i _ | 
|ã€€ã€€ï½€ãƒ¼â€•â€•-----------â”´ âŒ’Â´ ï¼‰ 
ï¼ˆãƒ½  _____________ ,, ï¼¿Â´ï¼‰ 
 ï¼ˆ_âŒ’_______________ ,, ã‚£ 
     T                 |
     |                 |
</pre>

[ãƒ—ãƒ­ã‚°ãƒ©ãƒã§ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºè€…ã®@t_wadaã•ã‚“ã‚’ãŠæ‹›ãã—ãŸç¤¾å†…å‹‰å¼·ä¼šã§ã®æ§˜å­ã‚’ãŠå±Šã‘ï¼ï¼ƒãƒ¡ãƒ«ã‚«ãƒªãªæ—¥ã€… | mercan (ãƒ¡ãƒ«ã‚«ãƒ³)](https://mercan.mercari.com/articles/19386/)

> @t_wadaï¼šæ™‚é–“ã‚’å„ªå…ˆã™ã‚‹ãŸã‚ã«å“è³ªã‚’çŠ ç‰²ã«ã§ãã‚‹ã¨ä¿¡ã˜ã¦ã„ã‚‹äººã‚‚ãªã‹ã«ã¯ã„ã‚‹ãŒã€ãã‚Œã¯ã€Œé–“é•ã„ã€ã§ã‚ã‚‹ã€‚çŸ­æœŸçš„ã«ã¯é€Ÿåº¦ãŒã‚ãŒã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¦ã‚‚ã€ãã‚Œã¯ã€Œä¸€æ™‚çš„ãªéŒ¯è¦šã€ã€‚ã“ã®çŸ­æœŸçš„ã®çµ‚ã‚ã‚ŠãŒãã‚‹æç›Šåˆ†å²ç‚¹ã¯ã€3å¹´å¾Œã¨ã‹ã§ã¯ãªãã€1ãƒ¶æœˆä»¥å†…ã«ã‚ã‚‰ã‚ã‚Œã‚‹ã€‚ã¤ã¾ã‚Šã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«ãŠã‘ã‚‹å“è³ªã§ã‚ã‚‹å†…éƒ¨å“è³ªã‚’ä¸Šã’ã‚‹ã“ã¨ã§ã€æ‰‹æˆ»ã‚Šã‚„ç„¡é§„ãŒãªããªã‚Šçµæœçš„ã«ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒã‚ãŒã‚‹ã€‚ãã‚Œã«ã‚ˆã£ã¦å­¦ã³ã®ãƒ«ãƒ¼ãƒ—ã‚’é«˜é€Ÿã«å›ã›ã¦å¤–éƒ¨å“è³ªãŒä¸ŠãŒã‚‹ã€‚

## ãƒ†ã‚¹ãƒˆã®ç¨®é¡

ãƒ†ã‚¹ãƒˆã«ã¯ã€é€šå¸¸ã€ãƒ†ã‚¹ãƒˆã®ç¯„å›²ã€ç›®çš„ã«ã‚ˆã£ã¦ã€Œå˜ä½“ã€ã€Œçµåˆ(çµ±åˆ)ã€ã€Œç·åˆã€ã¨åˆ†ã‘æ–¹ã‚’ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ãŒã€å ´åˆã«ã‚ˆã£ã¦ã¯ï¼”åŒºåˆ†ãã‚‰ã„ã«åˆ†ã‘ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦åŒã˜åç§°ã§ã‚‚å†…å®¹ãŒç•°ãªã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ãƒãƒ¼ãƒ ã§æ˜ç¤ºçš„ã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¡ãªã¿ã«ã€ä¸‹è¨˜æ›¸ç±ã§ Google ã§ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã«ãŠã‘ã‚‹ãƒ†ã‚¹ãƒˆã§ã¯ã€ä¸Šè¨˜ã®å‘¼ç§°ã§ã¯ãªãã€small, medium, large, enormous(å·¨å¤§ãª) ã®æŒ‡é‡ã®ä¾‹ã¨ã—ã¦ã€ä¸‹è¨˜ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

[ãƒ†ã‚¹ãƒˆã‹ã‚‰è¦‹ãˆã¦ãã‚‹ ã‚°ãƒ¼ã‚°ãƒ«ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™º | ã‚¸ã‚§ãƒ¼ãƒ ã‚ºãƒ»ã‚¦ã‚£ãƒ†ã‚«ãƒ¼, ã‚¸ã‚§ãƒ¼ã‚½ãƒ³ãƒ»ã‚¢ãƒ¼ãƒœãƒ³, ã‚¸ã‚§ãƒ•ãƒ»ã‚­ãƒ£ãƒ­ãƒ¼ãƒ­, é•·å°¾é«˜å¼˜ |æœ¬ | é€šè²© | Amazon](https://www.amazon.co.jp/%E3%83%86%E3%82%B9%E3%83%88%E3%81%8B%E3%82%89%E8%A6%8B%E3%81%88%E3%81%A6%E3%81%8F%E3%82%8B-%E3%82%B0%E3%83%BC%E3%82%B0%E3%83%AB%E3%81%AE%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E9%96%8B%E7%99%BA-%E3%82%B8%E3%82%A7%E3%83%BC%E3%83%A0%E3%82%BA%E3%83%BB%E3%82%A6%E3%82%A3%E3%83%86%E3%82%AB%E3%83%BC/dp/482228512X)

(æ›¸ç±ã‹ã‚‰ã®è¦ç´„ã§ã™ã€‚(è£œè¶³)ã€€ã¯ã€æµ·è€åŸã®æ‰€æ„Ÿã§ã™ã€‚)

- small
    - ç’°å¢ƒã‹ã‚‰åˆ‡ã‚Šé›¢ã—ã¦ã‚³ãƒ¼ãƒ‰å˜ä¸€ã®æŒ¯ã‚‹èˆã„ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚ãŸã¨ãˆã°ã‚¯ãƒ©ã‚¹ã‚„é–¢æ•°å˜ä½ã®ã§ãƒ†ã‚¹ãƒˆã€‚
    - Googleã®ç¤¾å¤–ã§ã¯ä¸€èˆ¬çš„ã«ã¯ã€Œå˜ä½“ãƒ†ã‚¹ãƒˆã€ã¨å‘¼ã°ã‚Œã‚‹ã€‚
    - å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆã§ã¯åˆ°é”ä¸å¯èƒ½ãªã¨ã“ã‚ã¾ã§åŒ…æ‹¬çš„ã«ã‚«ãƒãƒ¼ã™ã‚‹ã€‚
    - å¤–éƒ¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ¢ãƒƒã‚¯ã¨ã—ã€å¤–éƒ¨ä¾å­˜ãŒãªã„ã‚‚ã®ã¨ã™ã‚‹ã€‚
        - (è£œè¶³)å¤–éƒ¨ã¨ã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ãªã„ã‚‚ã®ã€‚JavaScriptã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« â‰’ ãƒ•ã‚¡ã‚¤ãƒ«ã€‚  
      ã¨ã¯ã„ãˆã€æ–‡å­—åˆ—å¤‰æ›ãªã©å˜ç´”ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£çš„ãªã‚‚ã®ã¯ãƒ¢ãƒƒã‚¯åŒ–ã—ãªã„ã“ã¨ã‚‚ã€‚  
      ãã®å ´åˆã§ã‚‚ã€è‡ªä½œã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã‚ã‚Œã°ã€ãã‚Œè‡ªä½“ã‚‚å˜ä½“ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚
    - é »ç¹ã«å®Ÿè¡Œã•ã‚Œé«˜é€Ÿã«å®Ÿè¡Œã§ãã‚‹ã“ã¨ã€‚
    - å®Ÿè£…ã¨åŒæ™‚ã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ãå¿…è¦ãŒã‚ã‚‹ã€‚
        - (è£œè¶³)small test ã¨ã—ã¦é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã‚‹ã®ã§ã¯ãªãã€å®Ÿè£…ã« small test ãŒå«ã¾ã‚Œã‚‹ã€‚(é–‹ç™ºã¨ãƒ†ã‚¹ãƒˆã®èåˆ)
        - (è£œè¶³)ãƒ†ã‚¹ãƒˆè¨˜è¿° -> ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° -> ãƒªãƒ•ã‚¡ã‚¯ã‚¿ ã‚’ç¹°ã‚Šè¿”ã™ã€‚

- medium
    - è¤‡æ•°ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®ã‚„ã‚Šå–ã‚Šã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚
    - Googleã®ç¤¾å¤–ã§ã¯ä¸€èˆ¬çš„ã«ã¯ã€Œçµ±åˆãƒ†ã‚¹ãƒˆã€ã¨å‘¼ã°ã‚Œã‚‹ã€‚
    - small ãƒ†ã‚¹ãƒˆã‚ˆã‚Šç¯„å›²ãŒåºƒãã€æ™‚é–“ã‚‚ã‹ã‹ã‚‹ã€‚
    - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é™ã‚‰ã‚ŒãŸã‚µãƒ–ã‚»ãƒƒãƒˆã¨ã®é–“ã®ã‚„ã‚Šå–ã‚Šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚
    - å¯¾è±¡ä»¥å¤–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ¢ãƒƒã‚¯åŒ–ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚
        - (è£œè¶³)localhost ã§å®Ÿè¡Œã•ã‚Œã‚‹ DB ãªã©ã«æ¥ç¶šã™ã‚‹ã“ã¨ãªã©ã¯ã‚ã‚‹ã€‚
    - å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€small ã‚ˆã‚Šã‚‚ã¾ã°ã‚‰ã€‚
        - (è£œè¶³)è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒã§ãã‚Œã°ã€1æ—¥ã«1å›ãã‚‰ã„ã‹ã€‚
        - (è£œè¶³)æ‰‹å‹•ã§ã‚ã‚Œã°ã€å®Ÿè£…ã€small ãƒ†ã‚¹ãƒˆãŒçµ‚ã‚ã£ãŸæ®µéšã§ã€ãªã©ã€‚

- large, enormous
    - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚
        - (è£œè¶³)è¤‡æ•°ã®ã‚·ã‚¹ãƒ†ãƒ ã§1ã¤ã®è¦ä»¶ã‚’æº€ãŸã™å ´åˆãªã©ã€å€‹ã€…ã®ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆã‚’ largeã€å…¨ä½“ã‚’ enormous ã¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ã‹ã¨æ€ã†ã€‚
        - (è£œè¶³)ã‚³ãƒ³ãƒ†ãƒŠã«ã‚ˆã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ãŒé€²ã‚€ã¨ã€ã©ã®ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ã§ã©ã†ã„ã£ãŸçµ„ã¿åˆã‚ã›ã‚’è¡Œã†ã‹ã®æ¤œè¨ãŒå¿…è¦ã€‚
    - ç’°å¢ƒã¯æœ¬ç•ªã¨åŒã˜ã‹è¿‘ã„ã‚‚ã®ã§ã€ãƒ¢ãƒƒã‚¯ã¯ä½¿ã†ã“ã¨ã¯ãªã„ã€‚
    - å¤–éƒ¨ã®ã‚µãƒ¼ãƒ“ã‚¹ãªã©ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ã†ã“ã¨ã‚‚ã‚ã‚‹ã€‚
        - (è£œè¶³)large ã§ã¯ã€è»½é‡ãƒ•ã‚§ã‚¤ã‚¯ã®ã‚µãƒ¼ãƒ“ã‚¹ã€enormous ã¯ã€å…ˆæ–¹ãŒç”¨æ„ã—ã¦ã„ã‚‹ã®æ¤œè¨¼ç’°å¢ƒã¨ã„ã£ãŸåŒºåˆ¥ãŒã‚ã‚‹ã‹ã¨æ€ã†ã€‚
    - åŸºæœ¬çš„ã«æ‰‹å‹•ã§æ™‚é–“ã®ã‹ã‹ã‚‹ãƒ†ã‚¹ãƒˆã¨ãªã‚‹ã€‚
        - (è£œè¶³)å®Ÿè¡Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€ãƒªãƒªãƒ¼ã‚¹å‰ãŒè€ƒãˆã‚‰ã‚Œã‚‹

ã“ã‚Œã‚‰ã®åŒºåˆ†ã¯ã€Google å†…ã§ã‚‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„è£½å“ã”ã¨ã«ç´°ã‹ãé•ã†ãã†ã§ã€ä½œã£ã¦ã„ã‚‹ã‚‚ã®ã®æ€§è³ªã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¹ã‚­ãƒ«ãªã©ã«åˆã‚ã›ã¦å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã“ã§ã¯ã€ãƒ†ã‚¹ãƒˆã®å‘¼ç§°ã‚’ä¸Šã® small, medium, large, enormous ã¨ã—ã¦å‘¼ã¶ã“ã¨ã¨ã—ã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆã®è‡ªå‹•åŒ–

ç¶™ç¶šã—ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã€å„ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ã§ã¯ã€ã§ãã‚‹é™ã‚Šè‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã¹ãã§ã™ã€‚

"å•é¡ŒãŒã€äººé–“ã®ç›´æ„Ÿã‚„ç¿’æ…£ã€æ€è€ƒã«é–¢ã™ã‚‹ã‚‚ã®ã§ãªã‘ã‚Œã°è‡ªå‹•åŒ–ã™ã¹ã—"ã¨ Google ã®æŒ‡é‡ã§ã‚‚è¬³ã£ã¦ã„ã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆè¦æ¨¡ãŒå°ã•ããªã‚‹ã»ã©ã€æ©Ÿæ¢°ã§åˆ¤æ–­ã§ãã‚‹äº‹ãŒå¤šã„ã¨æ€ã†ã®ã§ã€smallãƒ†ã‚¹ãƒˆã§ã¯ã€ç¾åœ¨ã¯ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ãŒå¿…é ˆã§ã‚ã‚‹ã€ã¨ã„ã†èªè­˜ã§ã„ã‚‹ã¹ãã§ã—ã‚‡ã†ã€‚

## ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ / ãƒ“ãƒ˜ã‚¤ãƒ“ã‚¢é–‹ç™ºï¼ˆBDDï¼‰

ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã¨ã¯ï¼ˆTDDï¼‰ã€ã¯ã˜ã‚ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã€ãã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã®ã«æœ€ä½é™å¿…è¦ãªå®Ÿè£…ã‚’è¡Œã£ã¦ãƒ†ã‚¹ãƒˆã‚’æˆåŠŸã•ã›ã€ã‚³ãƒ¼ãƒ‰ã‚’æ´—ç·´ã•ã›ã‚‹ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰ã¨ã„ã†ã€çŸ­ã„ç¹°ã‚Šè¿”ã—ã§å®Ÿè£…ã‚’è¡Œã†ã‚¹ã‚¿ã‚¤ãƒ«ã®ã“ã¨ã§ã™ã€‚

ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã€ä¸‹è¨˜ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚

- å¿…è¦æœ€ä½é™ã®ã‚³ãƒ¼ãƒ‰ã—ã‹æ›¸ã‹ãªããªã‚‹ã€‚
- ã‚³ãƒ¼ãƒ‰ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã‚„å¤‰æ›´ã«ã‚ˆã‚‹å½±éŸ¿ã‚’ã™ãã«ç¢ºèªã§ãã‚‹ã€‚
- è¤‡é›‘ãªä»•æ§˜ã‚’1ã¤ãšã¤æ•´ç†ã—ãªãŒã‚‰å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€å®Ÿè£…ã®é€Ÿåº¦ã‚’ä¸Šã’ã‚‰ã‚Œã‚‹ã€‚
- 

ãƒ“ãƒ˜ã‚¤ãƒ“ã‚¢é–‹ç™ºï¼ˆBDDï¼‰ã¯ã€TDD ã‚’æ‹¡å¼µã—ã€è¦æ±‚ä»•æ§˜ã‹ã‚‰æŒ¯ã‚‹èˆã„ã‚„æ¡ä»¶ãªã©ã‚’è‡ªç„¶è¨€èªã«è¿‘ã„å½¢ã§ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹ç‚¹ãŒä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºãŒã€ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ãã“ã¨ã«æ¯”ã¹ã€ä»•æ§˜ã‚’å…ˆã«æ›¸ãã€ã¨ã„ã†ç‚¹ãŒç•°ãªã‚Šã¾ã™ã€‚

å€‹äººçš„ã«ã¯ã€ä»•æ§˜â‰’ãƒ†ã‚¹ãƒˆ ã ã¨æ€ã„ã¾ã™ã®ã§ã€TDD ã‚’å§‹ã‚ã‚‹ã¨è‡ªç„¶ãªå½¢ã¨ã—ã¦ BDD ã«å¸°ç€ã™ã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚

[ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼æŒ¯ã‚‹èˆã„é§†å‹•é–‹ç™ºã‚’å§‹ã‚ã‚‹ãŸã‚ã®åŸºç¤çŸ¥è­˜ï¼šã„ã¾ã•ã‚‰èã‘ãªã„TDD/BDDè¶…å…¥é–€ï¼ˆ1ï¼‰ï¼ˆ3/3 ãƒšãƒ¼ã‚¸ï¼‰ - ï¼ IT](https://atmarkit.itmedia.co.jp/ait/articles/1403/05/news035_3.html)

## JavaScript / TypeScript ã«ãŠã‘ã‚‹ ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

JavaScript ã«é™ã‚‰ãšã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸã‚Šå®Ÿæ–½ã™ã‚‹ã«ã¯ã€åŠ¹ç‡åŒ–ã®ãŸã‚ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚

ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

- ãƒ†ã‚¹ãƒˆã®è¨˜è¿°ãƒ«ãƒ¼ãƒ«
- ãƒ¢ãƒƒã‚¯ä½œæˆ
- è©•ä¾¡ãƒ»çµæœã®è¡¨ç¤º
- ãƒ–ãƒ©ã‚¦ã‚¶ãªã©UIã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
- ã‚«ãƒãƒ¬ãƒƒã‚¸

åŸºæœ¬çš„ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ãªã©UIã‚’ä½¿ç”¨ã›ãšã€ã‚·ã‚§ãƒ«ä¸Šã§å‹•ä½œã™ã‚‹ã“ã¨ãŒå¿…è¦ã§ã™ã€‚ãã†ã™ã‚‹ã“ã¨ã§ Git ã«ãƒ—ãƒ«ãƒªã‚¯ã—ãŸæ™‚ã‚„ã€ãƒªãƒªãƒ¼ã‚¹å‰ã«è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆã‚’æµã™ã€ã¨ã„ã†ã“ã¨ãŒã§ãã‚‹ã‹ã‚‰ã§ã™ã€‚

JavaScript / TypeScript ç”¨ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€Jest ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ãŒæœ€ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚

[Jest Â· ğŸƒ Delightful JavaScript Testing](https://jestjs.io/ja/#:~:text=Jest%20%E3%81%AF%E3%81%82%E3%82%89%E3%82%86%E3%82%8B%20JavaScript%20%E3%81%AE,%E3%83%86%E3%82%B9%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%A7%E3%81%99%E3%80%82)

ç‰¹å¾´ã¨ã—ã¦ä¸‹è¨˜ãŒã‚ã‚‹ã¨ãŠã‚‚ã„ã¾ã™ã€‚

- å¿…è¦ãªã‚‚ã®ãŒãƒ¯ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãªã£ã¦ã„ã‚‹ã€‚
- ãƒ¢ãƒƒã‚¯ãŒæ›¸ãã‚„ã™ã„ã€‚
- çµæœãŒè¦‹ã‚„ã™ã„ã€‚

## Jest ã§ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè·µ

ä»¥å‰ä½œã£ãŸ React ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã§ã€yarn ã§ Jest ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚åŒæ™‚ã«ã€TypeScript ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸã„ã®ã§ã€Jest ã®å‹å®šç¾© `@types/jest` ã¨ TypeScript ã§ãƒ†ã‚¹ãƒˆã‚’ç›´æ¥å®Ÿè¡Œã™ã‚‹ãŸã‚ã® `ts-jest` ã‚’ã‚ã‚ã›ã¦å…¥ã‚Œã¾ã™ã€‚

[ts-jest](https://kulshekhar.github.io/ts-jest/)

```
yarn add -D jest @types/jest ts-jest
```

Jest ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ `--init` ã‚’ã‚ªãƒ–ã‚·ãƒ§ãƒ³ã«ã¤ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰å½¢å¼ã§ä½œæˆã§ãã¾ã™ã€‚

```shell
> yarn jest --init

# package.json ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã€ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ "test" ã‚’è¿½åŠ ã—ã¦ã‚ˆã„ã‹ï¼Ÿ
âœ” Would you like to use Jest when running "test" script in "package.json"? â€¦ yes
#  è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ TypeScript  ã§å‡ºåŠ›ã™ã‚‹ã‹ï¼Ÿ
âœ” Would you like to use Typescript for the configuration file? â€¦ no
#  ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ç’°å¢ƒ
âœ” Choose the test environment that will be used for testing â€º node
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’å‡ºåŠ›ã™ã‚‹ã‹ï¼Ÿï¼ˆå®Ÿè¡Œæ™‚ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã‚‚ã§ãã‚‹ï¼‰
âœ” Do you want Jest to add coverage reports? â€¦ no
#  ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®è¨ˆæ¸¬ã«ã€ã©ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½¿ç”¨ã™ã‚‹ã‹
âœ” Which provider should be used to instrument code for coverage? â€º v8
# ãƒ†ã‚¹ãƒˆã”ã¨ã«è‡ªå‹•çš„ã«ãƒ¢ãƒƒã‚¯ã®ã‚¯ãƒªã‚¢ï¼ˆspyã®è¨ˆæ¸¬å€¤ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ï¼‰ã™ã‚‹ã€‚
âœ” Automatically clear mock calls and instances between every test? â€¦ yes
```

`jest.config.js` ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€`ts-jest` ã®ãŸã‚ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚

```js
module.exports = {
    // ä»–ã®è¨­å®š
    preset: "ts-jest", // <-- è¿½åŠ 
};
```

ç°¡å˜ãªãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦è©¦ã—ã¦ã¿ã¾ã™ã€‚`src`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã«ã€`__tests__` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã—ã¦ã€ã“ã®åå‰ãŒä¸€èˆ¬çš„ã§ã™ã€‚

ã“ã“ã«ã€`first-test.test.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚å†…å®¹ã‚’ä¸‹è¨˜ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã®æœ«å°¾ãŒ `.test.ts` ãªã®ã‚‚æ…£ç¿’çš„ãªã‚‚ã®ã§ã™ã€‚VSCode ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã§ã¯ãƒ†ã‚¹ãƒˆã®ã‚¢ã‚¤ã‚³ãƒ³ã«å¤‰ã‚ã‚‹ãŸã‚ã€åˆ¤åˆ¥ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

```ts
test('first-rest', () => {
  const a = 'test';
  expect(a).toBe('test');
});
```

ã“ã‚Œã¯ã€å¤‰æ•° `a` ãŒ "test" ã¨ã„ã†æ–‡å­—åˆ—ã§ã‚ã‚‹ã‹ã€ã¨ã„ã†ç¢ºèªã«ãªã‚Šã¾ã™ã€‚å½“ãŸã‚Šå‰ã§ã™ãŒã€ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã™ã€‚ã‚·ã‚§ãƒ«ã§ `yarn test` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```
> yarn test
yarn run v1.22.15
$ jest
 PASS  src/__tests__/first-test.test.ts
  âœ“ first-rest (3 ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        4.348 s
Ran all test suites.
Done in 4.99s.
```

å¤±æ•—ã•ã›ã¦ã¿ã¾ã™ã€‚ `const a = 'test1'` ã«å¤‰æ›´ã—ã¦ã€å†åº¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¾ã™ã€‚

```
> yarn test
yarn run v1.22.15
$ jest
 FAIL  src/__tests__/first-test.test.ts
  âœ• first-rest (3 ms)

  â— first-rest

    expect(received).toBe(expected) // Object.is equality

    Expected: "test"
    Received: "test1"

      1 | test('first-rest', () => {
      2 |   const a = 'test1';
    > 3 |   expect(a).toBe('test');
        |             ^
      4 | });
      5 |

      at Object.<anonymous> (src/__tests__/first-test.test.ts:3:13)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        4.003 s, estimated 5 s
Ran all test suites.
error Command failed with exit code 1.
```

ã“ã®ã‚ˆã†ã«ã€ã©ã“ã§ã©ã®ã‚ˆã†ã«å¤±æ•—ã—ãŸã‹ãŒã‚ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

> Linux (WSLãªã©ã‚‚)ã€Powershell ã§ã¯ çµæœã«è‰²ãŒã¤ã„ã¦è¦‹ã‚„ã™ããªã‚Šã¾ã™ã€‚  
> Windows ã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã¯è‰²ã‚’ã¤ã‘ã‚‹æ©Ÿèƒ½ã¯ãªã„ã®ã§ã€å˜è‰²ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
> WSL ã‹ã€Powershell ã®ä½¿ç”¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º

ã“ã“ã§ã¯ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®å®Ÿè·µã¨ã—ã¦ã€ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã®ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã‚’é¡Œæã¨ã—ã¦ã¿ã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã¨ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’è¨­è¨ˆãƒ»å®Ÿè£…ã™ã‚‹ã®ã«ãƒ†ã‚¹ãƒˆã‚’è»¸ã«é€²ã‚ã¦ã„ãã¨ã„ã†ã€é–‹ç™ºæ‰‹æ³•ã§ã‚ã‚Šã€æ±ºã—ã¦ãƒ†ã‚¹ãƒˆæ‰‹æ³•ã§ã¯ãªã„ã€ã¨ã„ã†ã“ã¨ã«æ³¨æ„ã™ã¹ãã§ã™ã€‚

ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã€ã¨ã„ã†å®Ÿè£…æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ã‚ãã¾ã§ã‚‚ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ãã€ã¨ã„ã†å®Ÿè£…æ‰‹æ³•ã§ã‚ã‚Šã€è¨­è¨ˆã«ã¯åŠã‚“ã§ã„ã¾ã›ã‚“ã€‚

### é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«

ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã§ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’ç¹°ã‚Šè¿”ã—ã¦é€²ã‚ã¾ã™ã€‚

1. ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
     - å¿…ãšå¤±æ•—ã™ã‚‹
2. ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
     - æˆåŠŸã™ã‚‹ã“ã¨é‡ç‚¹ã‚’ç½®ãã€ã‚³ãƒ¼ãƒ‰ã®è¦‹ã‚„ã™ã•ã€ç®¡ç†ã®ã—ã‚„ã™ã•ãªã©ã¯åº¦å¤–è¦–ã™ã‚‹ã€‚
     - ã“ã“ã«æ™‚é–“ã‚’æ›ã‘ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
3. ã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã€‚
     - ã“ã“ã§æ™‚é–“ã‚’æ›ã‘ã¦ã€ã‚³ãƒ¼ãƒ‰ã®è¦‹ã‚„ã™ã•ã€é‹ç”¨ã®ã—ã‚„ã™ã•ã€é‡è¤‡ã®æ’é™¤ãªã©ã‚’è¡Œã†ã€‚

ã¾ãŸã€å®Ÿè£…ä¸­ã«ç”Ÿã˜ãŸæ‡¸å¿µã‚„ãƒ†ã‚¹ãƒˆä¸è¶³ã¯ã€Todo ã¨ã—ã¦ã©ã‚“ã©ã‚“è¶³ã—ã¦ã€ãã‚Œã‚‰ã‚’è§£æ¶ˆã™ã‚‹ã‚ˆã†ã«ä¸Šã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãã¾ã™ã€‚

ã“ã“ã§ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããªãŒã‚‰ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã‚’ä½“é¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã®ä»•æ§˜

ãƒãƒƒãƒ•ã‚¡ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚çš„ã«ä¿æŒã—ã¦ãŠãã‚‚ã®ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®æä¾›å´ã¨å—ã‘å–ã‚Šå´ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒç•°ãªã‚‹å ´åˆãªã©ã«ä½¿ç”¨ã—ã¾ã™ã€‚ç°¡å˜ãªä¾‹ã ã¨ã€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ãŒãƒãƒƒãƒ•ã‚¡ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚

ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã¯ã€åŒã˜å‹ã®è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¾ã™ãŒã€ãƒãƒƒãƒ•ã‚¡ã¨ã—ã¦ä¸Šé™ãŒæœ‰ã‚Šã€ä¸Šé™ã«é”ã™ã‚‹ã¨ã€ã¯ã˜ã‚ã®ãƒãƒƒãƒ•ã‚¡ã‚’ä¸Šæ›¸ãã—ã¦ã„ãã‚ˆã†ã«ã—ã¾ã™ã€‚

ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰å€¤ã‚’å–ã‚Šå‡ºã™ã¨ãã«ã¯ã€æœ€æ–°ã®ã‚‚ã®ã‚’å–å¾—ã—ãŸã‚Šã€æœ€æ–°ã‹ã‚‰ã„ãã¤ã‹å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã—ãŸã‚Šã—ã¾ã™ã€‚

ã§ã™ã®ã§ã€ç¾åœ¨ã®æœ€æ–°ãŒã©ã“ã§ã‚ã‚‹ã‹ã®å ´æ‰€ã‚‚ä¿æŒã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™

ç©ºã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã¨ã—ã¾ã™ã€‚

`package.json` ã‚’ä½œæˆã—ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

ã“ã“ã§ã¯ã€è¨€èªã¯ `TypeScript`ã€ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€`jest` ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
```bash
$ npm init # Enter é€£æ‰“ã§ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’çµ‚äº†ã•ã›ã‚‹
$ npm install -D typescript ts-node eslint prettier eslint-config-prettier jest jest ts-jest @types/jest
```

eslint ã®è¨­å®š

```bash
$ npx eslint --init
âœ” How would you like to use ESLint? Â· problems
âœ” What type of modules does your project use? Â· esm
âœ” Which framework does your project use? Â· none
âœ” Does your project use TypeScript? Â· No / Yes
âœ” Where does your code run? Â· node
âœ” What format do you want your config file to be in? Â· YAML
âœ” Would you like to install them now with npm? Â· No / Yes
```

`.eslint.yml` ã®ä¿®æ­£

```yml
plugins:
  - "@typescript-eslint"
  - prettier # è¿½åŠ 
```

tsconfig.json ã®ä½œæˆ

```bash
$ npx tsc --init -moduleResolution node
```

prettier ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒ¼ãƒ‰  
â€» Linux, macOSã®å ´åˆã€‚windows ã®å ´åˆã¯ã€Powershell ã‚’ä½¿ç”¨ã™ã‚‹
```bash
curl -LO https://raw.githubusercontent.com/rits-ebihara/webdev-study/main/practice-react/.prettierrc.yml
```

Visual Studio Code ã‚’ä½¿ã£ã¦ã„ã¦ã€ESLint ã‚„ Prettier ã®æ‹¡å¼µæ©Ÿèƒ½ãŒå…¥ã£ã¦ã„ãªã„å ´åˆã¯ã€å…¥ã‚Œã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚

[ESLint - Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)

[Prettier - Code formatter - Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚

`src` ã¨ ãã®ä¸­ã«ã€ãƒ†ã‚¹ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ ¼ç´ã™ã‚‹ `__tests__` ã‚’ç”¨æ„ã—ã¾ã™ã€‚

```bash
mkdir -p src/__tests__
```

å®Ÿè£…ã‚’æ›¸ã„ã¦ã„ã `src/ringBuffer.ts` ã¨ã€ãã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ã `src/__tests__/ringBuffer.test.ts` ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚

```bash
touch src/ringBuffer.ts
touch src/__tests__/ringBuffer.test.ts
```

jest ã®è¨­å®šã‚’ã—ã¾ã™ã€‚

```bash
$ npx jest --init
âœ” Would you like to use Jest when running "test" script in "package.json"? â€¦ yes
âœ” Would you like to use Typescript for the configuration file? â€¦ no
âœ” Choose the test environment that will be used for testing â€º node
âœ” Do you want Jest to add coverage reports? â€¦ no
âœ” Which provider should be used to instrument code for coverage? â€º v8
âœ” Automatically clear mock calls, instances and results before every test? â€¦ yes
```

ts-jest ã®è¨­å®šã®ãŸã‚ã€`jest.config.js` ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

```js title="jest.config.js"
  preset: 'ts-jest',
```

### TODO ã‚’è€ƒãˆã‚‹

ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã‚’ä½œã‚‹ä¸Šã§ã€ã¯ã˜ã‚ã«è€ƒãˆã‚‰ã‚Œã‚‹æ©Ÿèƒ½ã‚„ç¢ºèªäº‹é …ã‚’åˆ—æŒ™ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ä»Šã¯ã‚ã¾ã‚Šæ·±ãè€ƒãˆãªãã¦ã„ã„ã§ã™ã€‚ã“ã® TODO ã¯å®Ÿè£…ä¸­ã«åˆ¤æ˜ã—ãŸå•é¡Œã‚„èª²é¡Œã‚’è¿½åŠ ã—ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚

TODO ã‚’ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦è¨˜è¼‰ã—ã¦ã„ãã¾ã—ã‚‡ã†

```ts title="src/__tests__/ringBuffer.test.ts"
/*
- å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
*/
```

ã©ã‚Œã‹ã‚‰å®Ÿè£…ã—ã¾ã—ã‚‡ã†ã€‚å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä»˜ãã‚„ã™ã„ã‚‚ã®ã‹ã‚‰å–ã‚Šçµ„ã‚€ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚"å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹" ãŒè€ƒãˆã‚„ã™ãã†ã§ã™ã€‚ã“ã‚Œã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹

ã¾ãšã¯ã€TODO ãƒªã‚¹ãƒˆã§å–ã‚Šæ›ã‹ã‚‹ä½œæ¥­ã®é …ç›®ã« `â¡` (UTF-8 ã® emoji ã§ã™ 'ã‚„ã˜ã‚‹ã—'ã§å¤‰æ›) ã‚’ã¤ã‘ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="2"
/*
â¡ å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
*/
```

"ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆâ€ã¨ã„ã†ã“ã¨ãªã®ã§ã€ã¾ãšã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°ã‚’å®Ÿè£…ãƒ»ãƒ»ãƒ»ã§ã¯ãªãã€ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°ã«ã‚µã‚¤ã‚ºã¨ãªã‚‹ 10 ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¾ã™ã€‚è©•ä¾¡ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¹ã§ä½œæˆã•ã‚ŒãŸãƒãƒƒãƒ•ã‚¡ã®é…åˆ—ã®å¤§ãã•ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
import { RingBuffer } from '../ringBuffer';

test('ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(10);
  expect(ringBuffer.buffer.length).toBe(10);
});
```

ã¾ã ã€å®Ÿè£…ã¨ã—ã¦ãªã«ã‚‚ãªã„ã®ã§ã€ã‚‚ã¡ã‚ã‚“ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã«ãªã‚Šã¾ã™ã€‚ã¾ãšã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ãŒã€å°‘ã—æ°—ã«ãªã‚‹ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

buffer ãŒå‚ç…§ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚ŒãŒå¤–éƒ¨ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€ä¸å‘³ã„ã§ã™ã€‚åˆ©ç”¨è€…å´ã§å‹æ‰‹ã«å¤‰æ›´ã•ã‚Œãªã„ã‚ˆã†ã«ã€private ã«ã—ãŸã„ã¨ã“ã‚ã§ã™ãŒã€ä»Šã®å®Ÿè£…ã«ã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã†ã„ã£ãŸå®Ÿè£…ä¸­ã®æ‡¸å¿µç‚¹ã¯ã€TODO ã«æ›¸ãè¶³ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="6"
/*
â¡ å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
- buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
*/
```

ã„ã¾ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒãªããªã‚‹ãŸã‚ã®æœ€ä½é™ã®å®Ÿè£…ã‚’è¡Œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ts title="src/ringBuffer.ts"
export class RingBuffer {
  public constructor(size: number) {}
  public buffer = [];
}
```

ãªã‚“ã¦ã²ã©ã„å®Ÿè£…ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€ã„ããªã‚Šæ­£ã—ã„å®Ÿè£…ã‚’ã™ã‚‹ã®ã§ã¯ãªãã€ï¼‘æ­©ãšã¤ã™ã™ã‚ã‚‹ã®ãŒ TDD ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’ç¶ºéº—ã«ã™ã‚‹æ©Ÿä¼šã¯ã€ã“ã®ã‚ã¨ã«ã‚ã‚‹ã®ã§å®‰å¿ƒã—ã¦ä¸‹ã•ã„ã€‚

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¯ãªããªã‚Šã¾ã—ãŸã®ã§ã€ãƒ†ã‚¹ãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
    Expected: 10
    Received: 0

      13 | test('ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹', () => {
      14 |   const ringBuffer = new RingBuffer(10);
    > 15 |   expect(ringBuffer.buffer.length).toBe(10);
         |                                    ^
      16 | });
      17 |
```

ã‚‚ã¡ã‚ã‚“ã€ãƒ†ã‚¹ãƒˆã¯å¤±æ•—ã—ã¾ã™ã€‚ã§ã‚‚ã€ç€å®Ÿã«å®Ÿè£…ã¯é€²ã‚“ã§ã„ã‚‹ã¨ã„ã†è¨¼ã§ã™ã€‚

ã“ã®ãƒ†ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã‚ˆã†ã«ã€â€œæœ€ä½é™â€ã®å®Ÿè£…ã‚’ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts"
export class RingBuffer {
  public constructor(size: number) {}
  public buffer = Array(10);
}
```

ä»Šåº¦ã¯ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸï¼èµ¤è‰²ãŒç·‘è‰²ã«å¤‰ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§æ°—åˆ†ã‚‚ã‚¹ãƒƒã‚­ãƒªã§ã™ã€‚ã—ã‹ã—ã“ã‚Œã§çµ‚ã‚ã‚Šã§ãªã„ã®ã¯åˆ¤ã£ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚ã‚„ã£ã±ã‚Šã²ã©ã„å®Ÿè£…ã§ã™ã­ã€‚

ã§ã‚‚ã€ã“ã‚Œã¯â€œä»®å®Ÿè£…â€ã§ã€ã“ã®ã‚ã¨ã¯ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’å‰Šé™¤ã™ã‚‹ã€ã¨ã„ã†ä½œæ¥­ã«å–ã‚Šæ›ã‹ã‚Šã€æœ¬æ¥ã®å®Ÿè£…ã«è¿‘ã¥ã‘ã¦ã„ãã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã¨ã¯ã€åŒã˜ã‚ˆã†ãªãƒ­ã‚¸ãƒƒã‚¯ãŒè¨˜è¿°ã—ã¦ã‚ã‚‹ã“ã¨ã‚‚ãã†ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã“ã“ã§ã¯ã€`10` ã¨ã„ã†æ•°å­—ãŒå®Ÿè£…ã®ä¸­ã¨ãƒ†ã‚¹ãƒˆã§å‡ºã¦ãã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’è§£æ¶ˆã™ã‚‹ã«ã¯ã€å®Ÿè£…ã®æ–¹ã‹ã‚‰ `10` ã¨ã„ã†æ•°å€¤ã‚’å–ã‚Šé™¤ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

`10` ã¯ãƒ†ã‚¹ãƒˆã§ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°ã‹ã‚‰æ¸¡ã•ã‚ŒãŸå€¤ã‚’å‚ç…§ã™ã‚Œã°ã„ã„ã®ã§ã€æ¬¡ã®ã‚ˆã†ãªå®Ÿè£…ã«ã—ã¦ã¿ã¾ã™ã€‚

```ts title="src/ringBuffer.ts"
export class RingBuffer {
  public constructor(size: number) {
    this.buffer = Array(size);
  }
  public buffer;
}
```

ä¿å­˜ã—ã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆã¯æˆåŠŸã—ãŸã¾ã¾ã§ã€å®‰å¿ƒã§ãã¾ã™ã€‚

ã“ã“ã§ã€ã¡ã‚‡ã£ã¨æ‡¸å¿µãŒã‚ã‚Šã¾ã™ã€‚`buffer` ã®é…åˆ—ã¯ã®å‹ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿã“ã®ã¾ã¾ã§ã¯ã€`any` ã®é…åˆ—ã¨ãªã‚Šã€é…åˆ—ã«ä½•ã§ã‚‚å…¥ã£ã¦ã—ã¾ã„ã¾ã™ã€‚é…åˆ—ã®ï¼‘ç•ªç›®ã« `string` ã€ï¼’ç•ªã‚ã« `number` ã¨ã„ã†ã“ã¨ã‚‚ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚å‹å®‰å…¨ã®ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€å‹ãŒæŒ‡å®šã•ã‚Œã¦ã„ãŸã»ã†ãŒè‰¯ã„ã§ã™ãŒã“ã‚Œã¯ã€åˆ©ç”¨è€…å´ãŒæŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸã»ã†ãŒæ±ç”¨æ€§ãŒé«˜ããªã‚‹ã§ã—ã‚‡ã†ã€‚

ã¾ã ãƒãƒƒãƒ•ã‚¡ã®ã‚µã‚¤ã‚ºã¯ã€ãƒã‚¤ãƒŠã‚¹ã‚„0ã¯ã‚ã‚Šãˆãªã„ã§ã™ã—ã€å¤§ãã™ãã‚‹ãƒãƒƒãƒ•ã‚¡ã‚‚å›°ã‚Šã‚‚ã®ã§ã™ã€‚ã“ã‚Œã‚‰ã®å…¥åŠ›ãƒã‚§ãƒƒã‚¯ã‚‚å¿…è¦ãã†ã§ã™ã€‚

ã“ã®ã“ã¨ã‚‚ TODO ã«ãŠã„ã¦ã€å¾Œã§è§£æ±ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãŸã€"å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹" ã®ã‚¿ã‚¹ã‚¯ã¯å®Œäº†ã—ãŸã®ã§ã€å…ˆé ­ã‚’ `âœ”` ã«ã—ã¦ãŠãã¾ã™ã€‚ 

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="2 6 7"
/*
âœ” å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
- buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã—ã€any ã‚’æ’é™¤ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹
*/
```

!!!note
    ã“ã®ã‚ˆã†ã«ã€â€œä»®å®Ÿè£…â€ã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹â€œæœ¬å®Ÿè£…â€ã¨ã„ã†ã‚ˆã†ã«ç´°ã‹ãã‚¹ãƒ†ãƒƒãƒ—ã‚’è¸ã‚“ã§é€²ã‚ã¦ã„ãã“ã¨ãŒå¤§äº‹ã§ã™ã€‚å®Ÿéš›ã™ã¹ã¦ã®å®Ÿè£…ã§ã“ã“ã¾ã§ç´°ã‹ãã‚„ã‚‹ã®ã‹ã¨ã„ã†ã¨ã€'No' ã§ã™ã€‚ã§ã™ãŒã€è¤‡é›‘ãªå•é¡Œã‚’è€ƒãˆã‚‹ã¨ãã«ã€ã“ã®ã‚ˆã†ã«ç´°ã‹ãã‚¹ãƒ†ãƒƒãƒ—ã‚’åˆ†ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨ãŒå¤§äº‹ã§ã€å°ã•ã™ãã‚‹ã‹ãªã€ã¨ã„ã†ã¨ã“ã‚ã¾ã§ã§ããŸã¨ã“ã‚ãŒã¡ã‚‡ã†ã©ã‚ˆã„ã‚µã‚¤ã‚ºã€ã¨ã„ãˆã¾ã™ã€‚

æ¬¡ã¯ã€ã©ã® TODO ã‚’å‡¦ç†ã—ã¾ã—ã‚‡ã†ã‹ã€‚ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹ã€ãŒè€ƒãˆã‚„ã™ãã†ãªã®ã§ã€ã“ã‚Œã«ã—ã¾ã—ã‚‡ã†ã€‚

### ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹

ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹ã¨ã„ã†ã®ã¯ã€ã©ã®ã‚ˆã†ãªå®Ÿè£…ãƒ»ãƒ»ãƒ»ã§ã¯ãªããƒ†ã‚¹ãƒˆã«ãªã‚‹ã§ã—ã‚‡ã†ã‹ã€‚`getCurrent` ãƒ¡ã‚½ãƒƒãƒ‰ã§å¼•æ•°ãªã—ã§å‘¼ã³å‡ºã™ã®ã¯ã©ã†ã§ã—ã‚‡ã†ã€‚

ã¾ãŸã€ãã®å‰ã«å€¤ãŒå…¥ã£ã¦ã„ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚"ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹"ã® TODO ã¨é‡è¤‡ã™ã‚‹ã®ã§ã™ãŒã€ã“ã¡ã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚æ±ºã‚ã¦ã—ã¾ã„ã¾ã—ã‚‡ã†ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ `push` ã¨ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
test('ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹' ,() => {
  const ringBuffer = new RingBuffer(5);
  ringBuffer.push('a1');
  ringBuffer.push('a2');
  expect(ringBuffer.getCurrent()).toBe('a2');
});
```

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts" hl_lines="6 7"
export class RingBuffer {
  public constructor(size: number) {
    this.buffer = Array(size);
  }
  public buffer;
  public push(value: any) {}
  public getCurrent() {}
}
```

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

```
    Expected: "a2"
    Received: undefined

      18 |   ringBuffer.push('a1');
      19 |   ringBuffer.push('a2');
    > 20 |   expect(ringBuffer.getCurrent()).toBe('a2');
         |                                   ^
      21 | });
      22 |
```

ã‚‚ã¡ã‚ã‚“ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚ä½•åº¦ã‚‚è¨€ã„ã¾ã™ãŒã€ã“ã‚Œã§è‰¯ã„ã‚“ã§ã™ã€‚ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹æœ€ä½é™ã®å®Ÿè£…ã‚’ã—ã¾ã—ã‚‡ã†ã€‚"ä»®å®Ÿè£…â€ã§ã™ã€‚

```ts title="src/ringBuffer.ts"
  public getCurrent() {
    return 'a2';
  }
```

ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã“ã‚Œã§ã¯ã„ã‘ã¾ã›ã‚“ã€‚å°‘ã—ãšã¤æœ¬æ¥ã®â€œæœ¬å®Ÿè£…â€ã«è¿‘ã¥ã‘ã¾ã—ã‚‡ã†ã€‚

ã“ã®æ©Ÿèƒ½ã®è¦ä»¶ã¯ã€ãƒãƒƒãƒ•ã‚¡ã®æœ€æ–°ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰å€¤ã‚’è¿”ã™ã€ã§ã™ã€‚ã¾ãšã€å˜ç´”ã«ã™ã‚‹ãŸã‚æ„å›³çš„ã«æ¡ä»¶ã‚’ç„¡è¦–ã™ã‚‹ã¨ã€ãƒãƒƒãƒ•ã‚¡ã®å€¤ã‚’è¿”ã™ã€ã§ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ã“ã¨ã¯å¿˜ã‚Œã¦ã€ã“ã®å®Ÿè£…ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã®ã¯ã˜ã‚ã®ä¸€æ­©ã§ã™ã€‚

```ts title="src/ringBuffer.ts"
  public getCurrent() {
    this.buffer[0] = 'a2';
    return this.buffer[0];
  }
```

ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸã€‚ã‚‚ã†ï¼‘æ­©é€²ã¿ã¾ã™ã€‚`getCurrent` é–¢æ•°ã®ä¸­ã§ buffer ã«è¿½åŠ ã—ã¦ã„ã¾ã™ãŒã€ã“ã“ãŒé©åˆ‡ã§ã—ã‚‡ã†ã‹ï¼Ÿ buffer ã«è¿½åŠ ã™ã‚‹ã®ã¯ã€`push`ãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²ã§ã™ã­ã€‚ãã“ã«ç§»å‹•ã—ã¾ã—ã‚‡ã†ã€‚

ã¾ãŸã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒ '0' ã¨ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»Šã®æœ€æ–°ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ã€ã‚¯ãƒ©ã‚¹ã®å†…éƒ¨ã§æŒã£ã¦ãŠã‘ã°è‰¯ã•ãã†ã§ã™ã€‚

```ts title="src/ringBuffer.ts"
  private currentIndex = 0;
  public push(value: any) {
    this.buffer[0] = 'a2';
  }
  public getCurrent() {
    return this.buffer[this.currentIndex];
  }
```

`push` ã®å†…å®¹ã¯ã€"ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹"ã§å®Ÿè£…ã™ã‚‹ã®ã§ã€ä»Šã¯ã“ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹æœ€ä½é™ã®å®Ÿè£…ã«ã—ã¦ãŠãã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="3 5"
/*
âœ” å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
â¡ ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
- buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã—ã€any ã‚’æ’é™¤ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹
*/
```

### ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹

ãƒãƒƒãƒ•ã‚¡ã«è¿½åŠ ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€å‰å›ä½œã£ã¦ã„ã¾ã™ã®ã§ã€ã“ã‚Œã‚’æ”¹å–„ã—ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãã®å‰ã«ã€ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ã€é€£ç¶šã—ã¦èª­ã‚“ã ã¨æ°—ã«ã€æ­£ã—ã buffer ã®é…åˆ—ã«å…¥ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚

ã“ã“ã§ã€`toBe` ã‚’ä½¿ã‚ãšã«ã€`toEqual` ã‚’ä½¿ã†ã“ã¨ã«æ³¨æ„ã—ã¦ä¸‹ã•ã„ã€‚`toBe` ã¯ã€`===` ã¨åŒç­‰ã®æ¯”è¼ƒã‚’è¡Œã†ãŸã‚ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­èº«ãŒã‚ã£ã¦ã„ã‚‹ã‹ã®æ¯”è¼ƒã«ä½¿ãˆã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…å®¹ã®æ¯”è¼ƒã«ã¯ã€`toEqual` ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚é…åˆ—ã‚‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ã€ã“ã‚Œã‚’ä½¿ã„ã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
test('ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(5);
  ringBuffer.push('a1');
  ringBuffer.push('a2');
  expect(ringBuffer.buffer).toEqual([
    'a1',
    'a2',
    undefined,
    undefined,
    undefined,
  ]);
});
```

ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚


ã¾ãŸã€å‘¼ã³å‡ºã™ãŸã³ã« pushã™ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1ã¥ã¤è¶³ã—ã¦ã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ `currentIndex` ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚

`buffer` ã®ãã® `currentIndex` ã«å¼•æ•°ã®å€¤ã‚’æ¸¡ã™ã®ã¯ã‚ã‹ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

```ts title="src/ringBuffer.ts" hl_lines="2 3"
  public push(value: any) {
    this.buffer[this.currentIndex] = value;
    this.currentIndex++;
  }
```

ã©ã†ã§ã—ã‚‡ã†ã€‚ã“ã®ãƒ†ã‚¹ãƒˆã¯æˆåŠŸã—ãŸã‚ˆã†ã§ã™ãŒã€å‰ã®ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸï¼

ã™ãã«åŸå› ã‚’èª¿ã¹ã¾ã—ã‚‡ã†ã€‚

```
    Expected: "a2"
    Received: undefined

      20 |   ringBuffer.push('a1');
      21 |   ringBuffer.push('a2');
    > 22 |   expect(ringBuffer.getCurrent()).toBe('a2');
         |                                   ^
      23 | });
```

`getCurrent` ã®ç¾å®Ÿå€¤ãŒ `undefined` ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ `push` ã—ãŸå¾Œã« `currentIndex` ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€ã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡ã—ç¤ºã—ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚

ã§ã¯ã€é †ç•ªã‚’é€†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```ts title="src/ringBuffer.ts" hl_lines="2"
  public push(value: any) {
    this.currentIndex++;
    this.buffer[this.currentIndex] = value;
  }
```

ä»Šåº¦ã¯ã€"ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’å¤‰æ›´ã™ã‚‹" ã®ãƒ†ã‚¹ãƒˆã§å¤±æ•—ã—ã¾ã—ãŸã€‚

```
    - Expected  - 1
    + Received  + 1

      Array [
    +   undefined,
        "a1",
        "a2",
    -   undefined,
        undefined,
        undefined,
      ]

      27 |   ringBuffer.push('a1');
      28 |   ringBuffer.push('a2');
    > 29 |   expect(ringBuffer.buffer).toEqual([
         |                             ^
      30 |     'a1',
      31 |     'a2',
      32 |     undefined,

      at Object.<anonymous> (src/__tests__/ringBuffer.test.ts:29:29)
```

`currentIndex` ã®åˆæœŸå€¤ãŒ '0' ãªã®ã§ã€+1 ã•ã‚Œã¦ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ `1` ã‹ã‚‰ãƒãƒƒãƒ•ã‚¡ã«æŒ¿å…¥ã•ã‚Œã¦ã—ã¾ã£ãŸãŸã‚ã§ã™ã­ã€‚`currentIndex` ã®åˆæœŸå€¤ã‚’ `-1` ã«ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts" hl_lines="6"
export class RingBuffer {
  public constructor(size: number) {
    this.buffer = Array(size);
  }
  public buffer;
  private currentIndex = -1;
  public push(value: any) {
    this.currentIndex++;
    this.buffer[this.currentIndex] = value;
  }
  public getCurrent() {
    return this.buffer[this.currentIndex];
  }
}
```

ãƒ†ã‚¹ãƒˆã«æˆåŠŸã—ã¾ã—ãŸã€‚

ã“ã®ã‚ˆã†ã«ã€æ©Ÿèƒ½ã®è¿½åŠ ã‚„ä¿®æ­£ã§ã€åˆ¥ã®äºˆæ¸¬ã—ãªã„å¤±æ•—ã‚’æ¤œå‡ºã—ãŸå ´åˆã€ã™ãã«å¯¾å¿œã—ã¾ã™ã€‚ãã®å ´åˆã§ã‚‚ã€ä¿®æ­£ãŒæ˜ç¢ºã§ã‚ã‚Œã°ãã®ã‚ˆã†ã«ã™ã‚Œã°è‰¯ã„ã®ã§ã™ãŒã€ãã†ã§ãªã„å ´åˆã¯ã€ä¸€æ—¦â€œä»®å®Ÿè£…â€ã‚’è¡Œã„ã€ã‚¹ãƒ†ãƒƒãƒ—ã‚’å°ã•ãã—ã¦è§£æ±ºã—ã¦ä¸‹ã•ã„ã€‚

ã“ã“ã§æ‡¸å¿µãŒã‚ã‚Šã¾ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç¯„å›²ã‚’è¶…ãˆãŸã‚‰ã€ã¤ã¾ã‚Šãƒªãƒ³ã‚°ãŒä¸€å‘¨ã—ãŸã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒ 0 ã«æˆ»ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚ŒãŒå®Ÿè£…ã§ãã¦ã„ã¾ã›ã‚“ã€‚TODOã«è¿½åŠ ã—ã¦ã‚‚ã„ã„ã§ã™ãŒã€ã“ã®ã¾ã¾ç¶šã‘ãŸã»ã†ãŒåŠ¹ç‡è‰¯ã•ãã†ã§ã™ã€‚

ã¾ãšã€ã©ã†å®Ÿè£…ã™ã‚‹ã‹ãƒ»ãƒ»ã§ã¯ãªãã€ã“ã®ãƒ†ã‚¹ãƒˆã‚‚æ›¸ãã¾ã—ã‚‡ã†ã€‚ã“ã†ãªã‚‹ã¹ãã€ã‚’æ›¸ãã“ã¨ã¯å¤§åˆ‡ã§ã™ã€‚ã“ã“ã§ã¯ã€æ–°ã—ã„ãƒ†ã‚¹ãƒˆã¨ã—ã¦ä»Šã®ãƒ†ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ›¸ãæ›ãˆã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
test('ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹ ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºã‚’è¶…ãˆã‚‹å ´åˆ', () => {
  const ringBuffer = new RingBuffer(5);
  for (let i=1; i < 7; i++) {
    ringBuffer.push(`a${i}`);
  }
  expect(ringBuffer.buffer).toEqual([
    'a6',
    'a2',
    'a3',
    'a4',
    'a5',
  ]);
});
```

ãƒ†ã‚¹ãƒˆã™ã‚‹ã¨äºˆæƒ³é€šã‚Šã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã®å®Ÿè£…ã‚’ã—ã¾ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒãƒãƒƒãƒ•ã‚¡ã®ã‚µã‚¤ã‚ºã‚’è¶…ãˆã¦ã„ãŸã‚‰ã€`currentIndex` ã‚’ `0` ã«ã™ã‚Œã°ã„ã„ã§ã™ã­ã€‚

```ts title="src/ringBuffer.ts" hl_lines="3 4 5"
  public push(value: any) {
    this.currentIndex++;
    if (this.buffer.length < this.currentIndex + 1) {
      this.currentIndex = 0;
    }
    this.buffer[this.currentIndex] = value;
  }
```

æˆåŠŸã—ã¾ã—ãŸã€‚ã²ã¨ã¾ãšã€ã“ã®ãƒ†ã‚¹ãƒˆã¯å®Œäº†ã§ã™ã€‚

æ¬¡ã®ãƒ†ã‚¹ãƒˆã¯åŒã˜ã‚ˆã†ãª "ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹" ã«ã—ã¾ã™ã€‚

### ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹

ã¾ãšã¯ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¨ã“ã‚ã‹ã‚‰ã§ã™ã­ã€‚ã“ã“ã§ã¯ã€get ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€å¼•æ•°ã«æˆ»ã‚‹æ•°å€¤ã‚’å…¥ã‚Œã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ãŒï¼‘é€±ã—ãŸã¨ãã®ã“ã¨ãŒæ°—ã«ãªã‚Šã¾ã™ãŒã€ã¾ãšã¯å˜ç´”ãªã‚±ãƒ¼ã‚¹ã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
test('ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(5);
  ringBuffer.push('a1');
  ringBuffer.push('a2');
  expect(ringBuffer.get(1)).toBe('a1');
});
```

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’é€šã™ãŸã‚ã«ã€`get` ã‚’å®Ÿè£…ã—ã¾ã™ã€‚æ…£ã‚Œã¦ãã¦ã€å®Ÿè£…ãŒæ˜ç¢ºãªå ´åˆã¯ã€å®Ÿè£…ã¾ã§ã—ã¦ã—ã¾ã„ã¾ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€ãƒ†ã‚¹ãƒˆã‚’é€šã™ã®ãŒç›®çš„ã§ã™ã€‚ãã‚Œä»¥å¤–ã®ã‚³ãƒ¼ãƒ‰ã¯æ›¸ã‹ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts"
  public get(back: number) {
    const index = this.currentIndex - back;
    return this.buffer[index];
  }
```

ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸã€‚ã“ã“ã§ã€ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ãŒï¼‘å‘¨ã—ãŸã¨ãã®ã“ã¨ã‚’æ¤œè¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
test('ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹ - ãƒªãƒ³ã‚°ã‚’ã¾ãŸãå ´åˆ', () => {
  const ringBuffer = new RingBuffer(5);
  for (let i = 1; i < 7; i++) {
    ringBuffer.push(`a${i}`);
  }
  expect(ringBuffer.get(1)).toBe('a5');
});
```

ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã‚’ç¢ºèªã—ã¦ã€å®Ÿè£…ã—ã¾ã™ã€‚`currentIndex` ãŒ `0` ã®å ´åˆã€`index` ãŒ `-1` ã«ãªã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã®ã§ã€0 ã‚’ä¸‹å›ã£ãŸã‚‰ ãƒãƒƒãƒ•ã‚¡ã®æœ€å¤§ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã—ã¾ã—ã‚‡ã†ã€‚

```ts title="src/ringBuffer.ts" hl_lines="3 4 5"
  public get(back: number) {
    let index = this.currentIndex - back;
    if (index < 0) {
      index = this.buffer.length - 1;
    }
    return this.buffer[index];
  }
```

ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã—ãŸã€‚ã“ã®å‡¦ç†ã¯ä»¥ä¸Šãªã®ã§ã€ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã«ã—ã¦ãŠãã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="4"
/*
âœ” å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
- buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã—ã€any ã‚’æ’é™¤ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹
*/
```

### ãƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

ä»Šã¾ã§ã®ãƒãƒƒãƒ•ã‚¡ã«æ ¼ç´ã§ãã‚‹å€¤ã¯ã€æ–‡å­—åˆ—ã«é™å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’åˆ©ç”¨è€…ãŒå‹å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

TypeScript ã®ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’åˆ©ç”¨ã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚

ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã¨ã¯ã€ã‚¯ãƒ©ã‚¹ã‚„é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹å´ãŒå‹ã‚’æŒ‡å®šã—ã€ãã®å‹ã§å†…éƒ¨ã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚

TypeScript ã ã‘ã§ãªãã€Java ã‚„ C# ãªã©ä»–ã®è¨€èªã§ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»Šã¾ã§é¦´æŸ“ã¿ãŒãªã‘ã‚Œã°æ˜¯éã“ã“ã§å­¦ã‚“ã§ãã ã•ã„ã€‚

ãã®ãŸã‚ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="7"
/*
âœ” å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
- buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
â¡ ãƒãƒƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã—ã€any ã‚’æ’é™¤ã™ã‚‹
- ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹
*/
```

```ts
test('ãƒãƒƒãƒ•ã‚¡ã®æ–¹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer<number>(5);
  ringBuffer.push(0);
  expect(ringBuffer.getCurrent()).toBe(0);
});
```

ã‚¯ãƒ©ã‚¹ã«ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®æŒ‡å®šãŒãªã„ã®ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ã¾ãšã¯ã“ã‚Œã‚’è§£æ¶ˆã—ã¾ã—ã‚‡ã†ã€‚

```ts title="src/ringBuffer.ts"
export class RingBuffer<T> {
  //...
}
```

ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸã€‚ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’å°å…¥ã—ãŸã“ã¨ã§ã€å‰ã«æ‡¸å¿µã—ã¦ã„ãŸ 'any' ãŒè§£æ¶ˆã§ãã¾ã™ã€‚

`put` ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®å‹ã® `any` ã‚’ ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã® `T` ã¨ã—ã¾ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã€åˆ©ç”¨ã™ã‚‹å´ãŒæŒ‡å®šã—ãŸå‹ã«é™å®šã•ã‚Œã¾ã™ã€‚

ã¾ãŸã€buffer ã‚‚ `any` ã®é…åˆ—ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€å‹å®šç¾©ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts" hl_lines="2 5"
  public constructor(size: number) {
    this.buffer = Array<T>(size);
  }
  // ...ç•¥
  public push(value: T) {
    this.currentIndex++;
    if (this.buffer.length < this.currentIndex + 1) {
      this.currentIndex = 0;
    }
    this.buffer[this.currentIndex] = value;
  }
```

ä¿å­˜ã—ã¦ã€ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã®ã¾ã¾ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚

### ãƒãƒƒãƒ•ã‚¡ã®ã‚µã‚¤ã‚ºã«åˆ¶é™ã‚’è¨­ã‘ã‚‹

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã€ãƒãƒƒã‚µã®ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã™ã‚‹ã¨ãã«ã€0ä»¥ä¸‹ã‚„å¤§ãã™ãã‚‹å€¤ã¯å•é¡Œã«ãªã‚Šã¾ã™ã€‚

è¨±å®¹ã™ã‚‹æ•°å­—ã®ç¯„å›²ã§ã™ãŒã€ä¸‹é™ã¯ 3ã€ä¸Šé™ã¯ 1000 ã¨ã—ã¾ã—ã‚‡ã†ã€‚

ã“ã“ã§ã¯ã€`assert` ã‚’åˆ©ç”¨ã—ã¦ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å¼•æ•°ã®å€¤ãŒç¯„å›²ã§ãªã„ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ç¯„å›²å¤–ã®å€¤ãŒå…¥ã£ãŸå ´åˆã¯ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ä¾‹å¤–ã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ä¾‹å¤–ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="3"
test('ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹', () => {
  expect(() => new RingBuffer(2)).toThrowError(
    'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
  );
});
```

ãƒ†ã‚¹ãƒˆãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰å®Ÿè£…ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts" hl_lines="5"
import assert from 'assert';

export class RingBuffer<T> {
  public constructor(size: number) {
    assert(size >= 3, 'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚');
    this.buffer = Array<T>(size);
  }
  /** çœç•¥ */
}
```

ä¸Šé™å€¤ã¨ãã‚Œãã‚Œã®å¢ƒç•Œå€¤ã‚‚ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts" hl_lines="3"
test('ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹', () => {
  expect(() => new RingBuffer(2)).toThrowError(
    'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
  );
  expect(() => new RingBuffer(3)).not.toThrow();
  expect(() => new RingBuffer(1000)).not.toThrow();
  expect(() => new RingBuffer(1001)).toThrowError(
    'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
  );
});
```

ãƒ†ã‚¹ãƒˆé€šã‚‹ã‚ˆã†ä¿®æ­£ã—ã¾ã™ã€‚

```ts title="src/ringBuffer.ts" hl_lines="5"
import assert from 'assert';
export class RingBuffer<T> {
  public constructor(size: number) {
    assert(
      size >= 3 && size <= 1000,
      'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
    );
    this.buffer = Array<T>(size);
  }
```

ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãŸã‚‰ã€ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¦ãŠãã¾ã™ã€‚

```ts hl_lines="8"
/*
âœ” å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
- buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ã€any ã‚’æ’é™¤ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹
*/
```

### buffer ã‚’éå…¬é–‹ã«ã™ã‚‹

æœ€å¾Œã« buffer ã‚’éå…¬é–‹ã«ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã¨ã—ã¦è¡Œã†ã®ã§ã€ãƒ†ã‚¹ãƒˆã¯æœ‰ã‚Šã¾ã›ã‚“ã€‚

```ts title="src/ringBuffer.ts"
  private buffer;
```

ãƒ†ã‚¹ãƒˆã§ã€`buffer` ã‚’å‚ç…§ã—ã¦ã„ãŸã¨ã“ã‚ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚TypeScriptã®å ´åˆã€éå…¬é–‹ã®ã‚¯ãƒ©ã‚¹ã§ã‚‚ `ringBuffer['buffer']`ã¨ã™ã‚‹ã“ã¨ã§ã€ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚

å®Ÿè£…ã§ã¯ãã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚’ã—ãªã„ã‚ˆã†ã«å¿ƒãŒã‘ã‚‹ã¨ã—ã¦ã€ãƒ†ã‚¹ãƒˆã§ã¯ã“ã‚Œã‚’åˆ©ç”¨ã—ã¾ã—ã‚‡ã†ã€‚

ãƒ†ã‚¹ãƒˆã¨å®Ÿè£…ã®å…¨ä½“ã‚’æ²è¼‰ã—ã¦ãŠãã¾ã™ã€‚

```ts title="src/__tests__/ringBuffer.test.ts"
/*
âœ” å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹
âœ” buffer ã‚’éå…¬é–‹ã«ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã®å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ã€any ã‚’æ’é™¤ã™ã‚‹
âœ” ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹
*/

import { RingBuffer } from '../ringBuffer';

test('ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(10);
  expect(ringBuffer['buffer'].length).toBe(10);
});

test('ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã®å€¤ã‚’å–å¾—ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(5);
  ringBuffer.push('a1');
  ringBuffer.push('a2');
  expect(ringBuffer.getCurrent()).toBe('a2');
});

test('ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(5);
  ringBuffer.push('a1');
  ringBuffer.push('a2');
  expect(ringBuffer['buffer']).toEqual([
    'a1',
    'a2',
    undefined,
    undefined,
    undefined,
  ]);
});

test('ãƒãƒƒãƒ•ã‚¡ã«å€¤ã‚’è¿½åŠ ã™ã‚‹ ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºã‚’è¶…ãˆã‚‹å ´åˆ', () => {
  const ringBuffer = new RingBuffer(5);
  for (let i = 1; i < 7; i++) {
    ringBuffer.push(`a${i}`);
  }
  expect(ringBuffer['buffer']).toEqual(['a6', 'a2', 'a3', 'a4', 'a5']);
});

test('ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer(5);
  ringBuffer.push('a1');
  ringBuffer.push('a2');
  expect(ringBuffer.get(1)).toBe('a1');
});

test('ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€æ–°ã‹ã‚‰æŒ‡å®šã—ãŸæ•°ã‚’æˆ»ã£ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹ - ãƒªãƒ³ã‚°ã‚’ã¾ãŸãå ´åˆ', () => {
  const ringBuffer = new RingBuffer(5);
  for (let i = 1; i < 7; i++) {
    ringBuffer.push(`a${i}`);
  }
  expect(ringBuffer.get(1)).toBe('a5');
});

test('ãƒãƒƒãƒ•ã‚¡ã®æ–¹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹', () => {
  const ringBuffer = new RingBuffer<number>(5);
  ringBuffer.push(0);
  expect(ringBuffer.getCurrent()).toBe(0);
});

test('ãƒãƒƒãƒ•ã‚¡ã®å¤§ãã•ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹', () => {
  expect(() => new RingBuffer(2)).toThrowError(
    'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
  );
  expect(() => new RingBuffer(3)).not.toThrow();
  expect(() => new RingBuffer(1000)).not.toThrow();
  expect(() => new RingBuffer(1001)).toThrowError(
    'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
  );
});
```

```ts title="src/ringBuffer.ts"
import assert from 'assert';
export class RingBuffer<T> {
  public constructor(size: number) {
    assert(
      size >= 3 && size <= 1000,
      'å¼•æ•°ã¯ 3 - 1000 ã®é–“ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚',
    );
    this.buffer = Array<T>(size);
  }
  private buffer;
  private currentIndex = -1;
  public push(value: T) {
    this.currentIndex++;
    if (this.buffer.length < this.currentIndex + 1) {
      this.currentIndex = 0;
    }
    this.buffer[this.currentIndex] = value;
  }
  public getCurrent() {
    return this.buffer[this.currentIndex];
  }
  public get(back: number) {
    let index = this.currentIndex - back;
    if (index < 0) {
      index = this.buffer.length - 1;
    }
    return this.buffer[index];
  }
}

```