# タスクランナー/モジュールバンドラ: Webpack

筆者: 海老原 賢次（kenji.ebihara@jrits.ricoh.co.jp）  
作成日: 2021-08-20
更新履歴:

- 2021-08-18: 新規作成

## 概要

webpack は、モジュールバンドラと呼ばれるツールで、複数の JavaScript ファイルで構成されるプログラムを1つ（複数に応じて複数）にマージするものです。

ES2015 以前のJavaScript には、他のファイルを参照する（Java でいうところの import）がありませんでした。そこで、それを独自の形式で実現するいくつかのツールが使われていました。CommonJS や AMD などの名前が知られています。

ES2015 で、import / export 構文により、他のファイルを参照できるようになり、Node.js ではファイルをマージしなくても、そのままで実行できます。

ブラウザでも ES20xx の対応が進んでおり import / export にも対応しています。JavaScript ファイルに import がある場合、自動的にファイルをダウンロードしてくれます。

ただ、npm で導入したパッケージの参照が解決できないですし、画像やCSSファイルなどもJavaScript化して 同梱できたり、webpack のビルドシステムとしての機能も手放せません。

また、ファイルが多数になると、パフォーマンスにも影響します。

これらの課題は、将来解決されると思いますが、2021年度現在では webpack を使うのがスタンダードとなっています。

## ローダーとプラグイン

ローダーとは、ファイルの種類ごとの変換処理をおこなうもので、必要に応じてwebpack とは別に導入します。

よく使われるローダーとしては、下記のようなものがあります。

- babel-loader: ES2015 以降のコードで書かれた JavaScript を ES5 形式のコードに変換する
- ts-loader: TypeScript から JavaScript への変換を行う
- css-loader: CSSファイルに書かれたものを、JavaScript ファイルに変換する。
- sass-loader: sass形式のファイルを、JavaScript ファイルに変換する。

プラグインは、変換処理以外の処理、ファイルの移動などの動作をするためのものです。

- html-webpack-plugin: webpack が出力したJSファイルを参照する&lt;script&gt;タグを挿入し、出力します。
- webpack-dev-server: 開発用の簡易のWebサーバーを起動できます。

## インストールと設定

webpack をインストールしてみましょう。プロジェクトフォルダに見立てた空フォルダを作成します。[package-manager](../02.package-manager/index.md) の章で作成下フォルダでもいいです。

空フォルダを作成した場合は、`npm init` を実行します。

webpack も npm のライブラリとして導入します。

開発環境で使い物なので、 -D をつけましょう。

